function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"2s/A":function(e,t,i){"use strict";i.r(t);var a,r,o,n=i("ofXK"),c=i("tyNb"),s=i("fXoL"),h=((a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275cmp=s.Pb({type:a,selectors:[["app-denuncias"]],decls:1,vars:0,template:function(e,t){1&e&&s.Wb(0,"router-outlet")},directives:[c.i],styles:[""]}),a),l=i("3Pt+"),p=i("PSD3"),u=i.n(p),g=i("M0ag"),d=i("ey9i"),m=i("dJ3e"),f=i("XNiG"),b=i("1G5W"),v=i("fqV1"),y=i("qC+V"),C=i("jhN1"),w=["ngxLoading"],M=["customLoadingTemplate"],x=function(e,t,i,a,r){return{animationType:e,primaryColour:t,secondaryColour:i,tertiaryColour:a,backdropBorderRadius:"3px",fullScreenBackdrop:r}},S=((r=function(){function e(t){_classCallCheck(this,e),this.sanitizer=t,this.ngxLoadingAnimationTypes=y.c,this.loading=!1,this.fullScreenBackdrop=!0,this.primaryColour="#004631",this.secondaryColour="#ffffff",this.coloursEnabled=!1,this.config={animationType:y.c.circle,primaryColour:this.primaryColour,secondaryColour:this.secondaryColour,tertiaryColour:this.primaryColour,backdropBorderRadius:"3px"}}return _createClass(e,[{key:"ngOnInit",value:function(){console.log("loading1 = ",this.loading)}},{key:"toggleColours",value:function(){this.coloursEnabled=!this.coloursEnabled,this.coloursEnabled?(this.primaryColour="#004631",this.secondaryColour="#006ddd"):(this.primaryColour="#ffffff",this.secondaryColour="#ccc")}},{key:"toggleTemplate",value:function(){this.loadingTemplate=this.loadingTemplate?null:this.customLoadingTemplate}},{key:"showAlert",value:function(){alert("ngx-loading rocks!")}}]),e}()).\u0275fac=function(e){return new(e||r)(s.Vb(C.b))},r.\u0275cmp=s.Pb({type:r,selectors:[["app-loading-ngx"]],viewQuery:function(e,t){var i;1&e&&(s.Qc(w,!0),s.Qc(M,!0)),2&e&&(s.zc(i=s.kc())&&(t.ngxLoadingComponent=i.first),s.zc(i=s.kc())&&(t.customLoadingTemplate=i.first))},inputs:{loading:"loading",fullScreenBackdrop:"fullScreenBackdrop"},decls:1,vars:9,consts:[[3,"show","config","template"]],template:function(e,t){1&e&&s.Wb(0,"ngx-loading",0),2&e&&s.rc("show",t.loading)("config",s.yc(3,x,t.ngxLoadingAnimationTypes.circle,t.primaryColour,t.secondaryColour,t.primaryColour,t.fullScreenBackdrop))("template",t.loadingTemplate)},directives:[y.a],styles:[""]}),r),I=i("ZOsW"),k=i("psEu"),z=["input"],A=((o=function(){function e(t){_classCallCheck(this,e),this.host=t,this.placeholder="Subir requisito...",this.file=null}return _createClass(e,[{key:"emitFiles",value:function(e){var t=e&&e.item(0);this.onChange(t),this.file=t,t?(this.placeholder=t.name,this.setImagen(t)):(this.placeholder="Subir requisito...",this.image="")}},{key:"fileChange",value:function(e){var t=this,i=new FileReader;if(e.files.length){var a=e.files[0];i.onload=function(){t.image=i.result},i.readAsDataURL(a)}}},{key:"setImagen",value:function(e){var t=this,i=new FileReader;i.onload=function(){t.image=i.result},i.readAsDataURL(e)}},{key:"removeImage",value:function(){this.image="",this.inputImagen.nativeElement.value=null,this.file=null,this.onChange(this.file)}},{key:"writeValue",value:function(e){this.image="",this.inputImagen.nativeElement.value=null,this.file=null}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||o)(s.Vb(s.o))},o.\u0275cmp=s.Pb({type:o,selectors:[["app-requisito-uploader"]],viewQuery:function(e,t){var i;1&e&&s.Ic(z,!0),2&e&&s.zc(i=s.kc())&&(t.inputImagen=i.first)},hostBindings:function(e,t){1&e&&s.jc("change",(function(e){return t.emitFiles(e.target.files)}))},inputs:{placeholder:"placeholder"},features:[s.Hb([{provide:l.l,useExisting:o,multi:!0}])],decls:9,vars:0,consts:[[1,"form-group"],[1,"col-lg-12",2,"text-align","center"],[1,"btn-group",2,"width","100%"],["title","Subir una nueva imagen","for","inputImage",1,"btn","btn-outline","btn-warning","size-20",2,"width","100%"],["type","file","accept","image/*","name","file","id","inputImage",1,"d-none"],["input",""],[1,"fa","fa-plus"]],template:function(e,t){1&e&&(s.bc(0,"div",0),s.bc(1,"div",1),s.bc(2,"div",2),s.bc(3,"label",3),s.Wb(4,"input",4,5),s.Wb(6,"i",6),s.Mc(7," Subir una Fotograf\xeda "),s.ac(),s.ac(),s.Wb(8,"p"),s.ac(),s.ac())},styles:[".file-upload[_ngcontent-%COMP%]   .file-upload-btn[_ngcontent-%COMP%]{position:absolute;width:100%;height:35px;z-index:9;opacity:0}.file-upload[_ngcontent-%COMP%]   .delete-file[_ngcontent-%COMP%]{position:absolute;right:50px;top:8px;font-size:16px;opacity:.8;cursor:pointer;z-index:99;visibility:hidden}.file-upload[_ngcontent-%COMP%]:hover\xa0.delete-file{visibility:visible}"]}),o);i("mrSG");var P=["video"],O=["canvas"];function D(e,t){if(1&e){var i=s.cc();s.bc(0,"div",6),s.jc("click",(function(e){return s.Dc(i),s.lc().rotateVideoInput(!0)})),s.ac()}}var _,R,E,F=function(){function e(t,i,a){_classCallCheck(this,e),this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=i,this._imageAsDataUrl=t,this._imageData=a}return _createClass(e,[{key:"imageAsBase64",get:function(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=e.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}},{key:"imageAsDataUrl",get:function(){return this._imageAsDataUrl}},{key:"imageData",get:function(){return this._imageData}}],[{key:"getDataFromDataUrl",value:function(e,t){return e.replace("data:".concat(t,";base64,"),"")}}]),e}(),T=((E=_=function(){function e(){_classCallCheck(this,e),this.width=640,this.height=480,this.videoOptions=_.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=_.DEFAULT_IMAGE_TYPE,this.imageQuality=_.DEFAULT_IMAGE_QUALITY,this.imageCapture=new s.q,this.initError=new s.q,this.imageClick=new s.q,this.cameraSwitched=new s.q,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}return _createClass(e,[{key:"ngAfterViewInit",value:function(){var e=this;this.detectAvailableDevices().then((function(){e.switchToVideoInput(null)})).catch((function(t){e.initError.next({message:t}),e.switchToVideoInput(null)}))}},{key:"ngOnDestroy",value:function(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}},{key:"takeSnapshot",value:function(){var e=this.nativeVideoElement,t={width:this.width,height:this.height};e.videoWidth&&(t.width=e.videoWidth,t.height=e.videoHeight);var i=this.canvas.nativeElement;i.width=t.width,i.height=t.height;var a=i.getContext("2d");a.drawImage(e,0,0);var r=this.imageType?this.imageType:_.DEFAULT_IMAGE_TYPE,o=i.toDataURL(r,this.imageQuality?this.imageQuality:_.DEFAULT_IMAGE_QUALITY),n=null;this.captureImageData&&(n=a.getImageData(0,0,i.width,i.height)),this.imageCapture.next(new F(o,r,n))}},{key:"rotateVideoInput",value:function(e){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(e?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}},{key:"switchToVideoInput",value:function(e){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(e,this.videoOptions)}},{key:"videoResize",value:function(){}},{key:"getVideoAspectRatio",value:function(){var e=this.nativeVideoElement;return e.videoWidth&&e.videoWidth>0&&e.videoHeight&&e.videoHeight>0?e.videoWidth/e.videoHeight:this.width/this.height}},{key:"initWebcam",value:function(e,t){var i=this,a=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var r=_.getMediaConstraintsForDevice(e,t);navigator.mediaDevices.getUserMedia({video:r}).then((function(e){i.mediaStream=e,a.srcObject=e,a.play(),i.activeVideoSettings=e.getVideoTracks()[0].getSettings();var t=_.getDeviceIdFromMediaStreamTrack(e.getVideoTracks()[0]);i.cameraSwitched.next(t),i.detectAvailableDevices().then((function(){i.activeVideoInputIndex=t?i.availableVideoInputs.findIndex((function(e){return e.deviceId===t})):-1,i.videoInitialized=!0})).catch((function(){i.activeVideoInputIndex=-1,i.videoInitialized=!0}))})).catch((function(e){i.initError.next({message:e.message,mediaStreamError:e})}))}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}},{key:"getActiveVideoTrack",value:function(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}},{key:"isMirrorImage",value:function(){if(!this.getActiveVideoTrack())return!1;var e="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?e=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(e=this.mirrorImage.x.toLowerCase())),e){case"always":return!0;case"never":return!1}return _.isUserFacing(this.getActiveVideoTrack())}},{key:"stopMediaTracks",value:function(){this.mediaStream&&this.mediaStream.getTracks&&this.mediaStream.getTracks().forEach((function(e){return e.stop()}))}},{key:"unsubscribeFromSubscriptions",value:function(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}},{key:"detectAvailableDevices",value:function(){return new Promise((function(e,t){}))}},{key:"trigger",set:function(e){var t=this;this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=e.subscribe((function(){t.takeSnapshot()}))}},{key:"switchCamera",set:function(e){var t=this;this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=e.subscribe((function(e){"string"==typeof e?t.switchToVideoInput(e):t.rotateVideoInput(!1!==e)}))}},{key:"videoWidth",get:function(){var e=this.getVideoAspectRatio();return Math.min(this.width,this.height*e)}},{key:"videoHeight",get:function(){var e=this.getVideoAspectRatio();return Math.min(this.height,this.width/e)}},{key:"videoStyleClasses",get:function(){var e="";return this.isMirrorImage()&&(e+="mirrored "),e.trim()}},{key:"nativeVideoElement",get:function(){return this.video.nativeElement}}],[{key:"getMediaConstraintsForDevice",value:function(e,t){var i=t||this.DEFAULT_VIDEO_OPTIONS;return e&&(i.deviceId={exact:e}),i}},{key:"getDeviceIdFromMediaStreamTrack",value:function(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){var t=e.getConstraints().deviceId;return _.getValueFromConstrainDOMString(t)}}},{key:"getFacingModeFromMediaStreamTrack",value:function(e){if(e){if(e.getSettings&&e.getSettings()&&e.getSettings().facingMode)return e.getSettings().facingMode;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().facingMode){var t=e.getConstraints().facingMode;return _.getValueFromConstrainDOMString(t)}}}},{key:"isUserFacing",value:function(e){var t=_.getFacingModeFromMediaStreamTrack(e);return!!t&&"user"===t.toLowerCase()}},{key:"getValueFromConstrainDOMString",value:function(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if("object"==typeof e){if(e.exact)return String(e.exact);if(e.ideal)return String(e.ideal)}}return null}}]),e}()).\u0275fac=function(e){return new(e||E)},E.\u0275cmp=s.Pb({type:E,selectors:[["webcam"]],viewQuery:function(e,t){var i;1&e&&(s.Ic(P,!0),s.Ic(O,!0)),2&e&&(s.zc(i=s.kc())&&(t.video=i.first),s.zc(i=s.kc())&&(t.canvas=i.first))},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera",mirrorImage:"mirrorImage"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(e,t){1&e&&(s.bc(0,"div",0),s.jc("click",(function(e){return t.imageClick.next()})),s.bc(1,"video",1,2),s.jc("resize",(function(e){return t.videoResize()})),s.ac(),s.Kc(3,D,1,0,"div",3),s.Wb(4,"canvas",4,5),s.ac()),2&e&&(s.Ib(1),s.Kb(t.videoStyleClasses),s.rc("width",t.videoWidth)("height",t.videoHeight),s.Ib(2),s.rc("ngIf",t.allowCameraSwitch&&t.availableVideoInputs.length>1&&t.videoInitialized),s.Ib(1),s.rc("width",t.width)("height",t.height))},directives:[n.m],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scale(-1,1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.18)}"]}),E.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},E.DEFAULT_IMAGE_TYPE="image/jpeg",E.DEFAULT_IMAGE_QUALITY=.92,E),W=((R=function e(){_classCallCheck(this,e)}).\u0275mod=s.Tb({type:R}),R.\u0275inj=s.Sb({factory:function(e){return new(e||R)},imports:[[n.c]]}),R),V=i("qw1q"),L=["sourceImage"];function j(e,t){if(1&e){var i=s.cc();s.bc(0,"img",3,4),s.jc("load",(function(e){return s.Dc(i),s.lc().imageLoadedInView()})),s.ac()}if(2&e){var a=s.lc();s.Jc("visibility",a.imageVisible?"visible":"hidden")("transform",a.safeTransformStyle),s.rc("src",a.safeImgDataUrl,s.Fc)}}function U(e,t){if(1&e){var i=s.cc();s.bc(0,"div",5),s.jc("keydown",(function(e){return s.Dc(i),s.lc().keyboardAccess(e)})),s.bc(1,"div",6),s.jc("mousedown",(function(e){return s.Dc(i),s.lc().startMove(e,"move")}))("touchstart",(function(e){return s.Dc(i),s.lc().startMove(e,"move")})),s.Mc(2,"\xa0"),s.ac(),s.bc(3,"span",7),s.jc("mousedown",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","topleft")}))("touchstart",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","topleft")})),s.Wb(4,"span",8),s.ac(),s.bc(5,"span",9),s.Wb(6,"span",8),s.ac(),s.bc(7,"span",10),s.jc("mousedown",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","topright")}))("touchstart",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","topright")})),s.Wb(8,"span",8),s.ac(),s.bc(9,"span",11),s.Wb(10,"span",8),s.ac(),s.bc(11,"span",12),s.jc("mousedown",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","bottomright")}))("touchstart",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","bottomright")})),s.Wb(12,"span",8),s.ac(),s.bc(13,"span",13),s.Wb(14,"span",8),s.ac(),s.bc(15,"span",14),s.jc("mousedown",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","bottomleft")}))("touchstart",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","bottomleft")})),s.Wb(16,"span",8),s.ac(),s.bc(17,"span",15),s.Wb(18,"span",8),s.ac(),s.bc(19,"span",16),s.jc("mousedown",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","top")}))("touchstart",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","top")})),s.ac(),s.bc(20,"span",17),s.jc("mousedown",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","right")}))("touchstart",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","right")})),s.ac(),s.bc(21,"span",18),s.jc("mousedown",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","bottom")}))("touchstart",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","bottom")})),s.ac(),s.bc(22,"span",19),s.jc("mousedown",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","left")}))("touchstart",(function(e){return s.Dc(i),s.lc().startMove(e,"resize","left")})),s.ac(),s.ac()}if(2&e){var a=s.lc();s.Jc("top",a.cropper.y1,"px")("left",a.cropper.x1,"px")("width",a.cropper.x2-a.cropper.x1,"px")("height",a.cropper.y2-a.cropper.y1,"px")("margin-left","center"===a.alignImage?a.marginLeft:null)("visibility",a.imageVisible?"visible":"hidden"),s.Mb("rounded",a.roundCropper)}}var H,q,B=((q=function(){function e(t,i){_classCallCheck(this,e),this.sanitizer=t,this.cd=i,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.exifTransform={rotate:0,flip:!1},this.stepSize=3,this.marginLeft="0px",this.imageVisible=!1,this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.disabled=!1,this.imageCropped=new s.q,this.startCropImage=new s.q,this.imageLoaded=new s.q,this.cropperReady=new s.q,this.loadImageFailed=new s.q,this.initCropper()}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.originalImage&&this.originalImage.complete&&this.exifTransform&&(e.containWithinAspectRatio||e.canvasRotation)&&this.transformOriginalImage(),e.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),e.aspectRatio&&this.imageVisible&&this.resetCropperPosition(),e.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())}},{key:"setCssTransform",value:function(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")}},{key:"ngOnInit",value:function(){this.stepSize=this.initialStepSize}},{key:"initCropper",value:function(){this.imageVisible=!1,this.transformedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.transformedSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}},{key:"loadImageFile",value:function(e){var t=this,i=new FileReader;i.onload=function(i){t.isValidImageType(e.type)?t.checkExifAndLoadBase64Image(i.target.result):t.loadImageFailed.emit()},i.readAsDataURL(e)}},{key:"isValidImageType",value:function(e){return/image\/(png|jpg|jpeg|bmp|gif|tiff)/.test(e)}},{key:"checkExifAndLoadBase64Image",value:function(e){var t=this;return new Promise((function(i,a){var r=function(e){t.originalImage=null,t.originalBase64=null,a(e)};t.originalImage=new Image,t.originalImage.onload=function(){t.originalBase64=e,t.exifTransform=function(e){switch("string"==typeof e&&(e=function(e){var t=new DataView(function(e){e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var t=atob(e),i=t.length,a=new Uint8Array(i),r=0;r<i;r++)a[r]=t.charCodeAt(r);return a.buffer}(e));if(65496!=t.getUint16(0,!1))return-2;for(var i=t.byteLength,a=2;a<i;){if(t.getUint16(a+2,!1)<=8)return-1;var r=t.getUint16(a,!1);if(a+=2,65505==r){if(1165519206!=t.getUint32(a+=2,!1))return-1;var o=18761==t.getUint16(a+=6,!1);a+=t.getUint32(a+4,o);var n=t.getUint16(a,o);a+=2;for(var c=0;c<n;c++)if(274==t.getUint16(a+12*c,o))return t.getUint16(a+12*c+8,o)}else{if(65280!=(65280&r))break;a+=t.getUint16(a,!1)}}return-1}(e)),e){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(e),t.originalSize.width=t.originalImage.naturalWidth,t.originalSize.height=t.originalImage.naturalHeight,t.transformOriginalImage().then((function(){return i()})).catch(r)},t.originalImage.onerror=r,t.originalImage.src=e}))}},{key:"getTransformedSize",value:function(){var e=this.canvasRotation+this.exifTransform.rotate;if(this.containWithinAspectRatio){if(e%2){var t=this.originalSize.height/this.aspectRatio;return{width:Math.max(this.originalSize.height,this.originalSize.width*this.aspectRatio),height:Math.max(this.originalSize.width,t)}}var i=this.originalSize.width/this.aspectRatio;return{width:Math.max(this.originalSize.width,this.originalSize.height*this.aspectRatio),height:Math.max(this.originalSize.height,i)}}return e%2?{height:this.originalSize.width,width:this.originalSize.height}:{width:this.originalSize.width,height:this.originalSize.height}}},{key:"transformImageBase64",value:function(){var e=this.canvasRotation+this.exifTransform.rotate,t=this.getTransformedSize(),i=document.createElement("canvas");i.width=t.width,i.height=t.height;var a=i.getContext("2d");return a.setTransform(this.exifTransform.flip?-1:1,0,0,1,i.width/2,i.height/2),a.rotate(Math.PI*(e/2)),a.drawImage(this.originalImage,-this.originalSize.width/2,-this.originalSize.height/2),Promise.resolve(i.toDataURL())}},{key:"setTransformedImage",value:function(e){var t=this;return new Promise((function(i,a){t.transformedBase64=e,t.safeImgDataUrl=t.sanitizer.bypassSecurityTrustResourceUrl(e),t.transformedImage=new Image,t.transformedImage.onload=function(){t.transformedSize.width=t.transformedImage.naturalWidth,t.transformedSize.height=t.transformedImage.naturalHeight,i(),t.cd.markForCheck()},t.transformedImage.onerror=function(){t.transformedImage=null,a()},t.transformedImage.src=t.transformedBase64}))}},{key:"transformOriginalImage",value:function(){var e=this;return this.originalImage&&this.originalImage.complete&&this.exifTransform?this.transformImageBase64().then((function(t){return e.setTransformedImage(t)})):Promise.reject(new Error("No Image Loaded"))}},{key:"imageLoadedInView",value:function(){var e=this;null!=this.transformedImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout((function(){return e.checkImageMaxSizeRecursively()})))}},{key:"checkImageMaxSizeRecursively",value:function(){var e=this;this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout((function(){e.checkImageMaxSizeRecursively()}),50))}},{key:"onResize",value:function(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()}},{key:"resizeCropperPosition",value:function(){var e=this.sourceImage.nativeElement;this.maxSize.width===e.offsetWidth&&this.maxSize.height===e.offsetHeight||(this.cropper.x1=this.cropper.x1*e.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*e.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*e.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*e.offsetHeight/this.maxSize.height)}},{key:"resetCropperPosition",value:function(){var e=this.sourceImage.nativeElement;if(this.maintainAspectRatio)if(e.offsetWidth/this.aspectRatio<e.offsetHeight){this.cropper.x1=0,this.cropper.x2=e.offsetWidth;var t=e.offsetWidth/this.aspectRatio;this.cropper.y1=(e.offsetHeight-t)/2,this.cropper.y2=this.cropper.y1+t}else{this.cropper.y1=0,this.cropper.y2=e.offsetHeight;var i=e.offsetHeight*this.aspectRatio;this.cropper.x1=(e.offsetWidth-i)/2,this.cropper.x2=this.cropper.x1+i}else this.cropper.x1=0,this.cropper.x2=e.offsetWidth,this.cropper.y1=0,this.cropper.y2=e.offsetHeight;this.doAutoCrop(),this.imageVisible=!0}},{key:"keyboardAccess",value:function(e){this.changeKeyboardStepSize(e),this.keyboardMoveCropper(e)}},{key:"changeKeyboardStepSize",value:function(e){e.key>="1"&&e.key<="9"&&(this.stepSize=+e.key)}},{key:"keyboardMoveCropper",value:function(e){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)){var t=e.shiftKey?"resize":"move",i=e.altKey?this.getInvertedPositionForKey(e.key):this.getPositionForKey(e.key),a=this.getEventForKey(e.key,this.stepSize);e.preventDefault(),e.stopPropagation(),this.startMove({clientX:0,clientY:0},t,i),this.moveImg(a),this.moveStop()}}},{key:"getPositionForKey",value:function(e){switch(e){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}},{key:"getInvertedPositionForKey",value:function(e){switch(e){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}},{key:"getEventForKey",value:function(e,t){switch(e){case"ArrowUp":return{clientX:0,clientY:-1*t};case"ArrowRight":return{clientX:t,clientY:0};case"ArrowDown":return{clientX:0,clientY:t};case"ArrowLeft":default:return{clientX:-1*t,clientY:0}}}},{key:"startMove",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.preventDefault&&e.preventDefault(),this.moveStart=Object.assign({active:!0,type:t,position:i,clientX:this.getClientX(e),clientY:this.getClientY(e)},this.cropper)}},{key:"moveImg",value:function(e){this.moveStart.active&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),"move"===this.moveStart.type?(this.move(e),this.checkCropperPosition(!0)):"resize"===this.moveStart.type&&(this.resize(e),this.checkCropperPosition(!1)),this.cd.detectChanges())}},{key:"setMaxSize",value:function(){if(this.sourceImage){var e=this.sourceImage.nativeElement;this.maxSize.width=e.offsetWidth,this.maxSize.height=e.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}},{key:"setCropperScaledMinSize",value:function(){this.transformedImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}},{key:"setCropperScaledMinWidth",value:function(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.transformedImage.width*this.maxSize.width):20}},{key:"setCropperScaledMinHeight",value:function(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.transformedImage.height*this.maxSize.height):20}},{key:"checkCropperPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.cropper.x1<0&&(this.cropper.x2-=e?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=e?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=e?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=e?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}},{key:"moveStop",value:function(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}},{key:"move",value:function(e){var t=this.getClientX(e)-this.moveStart.clientX,i=this.getClientY(e)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+t,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+t,this.cropper.y2=this.moveStart.y2+i}},{key:"resize",value:function(e){var t=this.getClientX(e)-this.moveStart.clientX,i=this.getClientY(e)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+t,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+t,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+t,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+t,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+t,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+t,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()}},{key:"checkAspectRatio",value:function(){var e=0,t=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,e=Math.max(this.cropper.x2-this.maxSize.width,0),t=Math.max(0-this.cropper.y1,0),(e>0||t>0)&&(this.cropper.x2-=t*this.aspectRatio>e?t*this.aspectRatio:e,this.cropper.y1+=t*this.aspectRatio>e?t:e/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,e=Math.max(this.cropper.x2-this.maxSize.width,0),t=Math.max(this.cropper.y2-this.maxSize.height,0),(e>0||t>0)&&(this.cropper.x2-=t*this.aspectRatio>e?t*this.aspectRatio:e,this.cropper.y2-=t*this.aspectRatio>e?t:e/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,e=Math.max(0-this.cropper.x1,0),t=Math.max(0-this.cropper.y1,0),(e>0||t>0)&&(this.cropper.x1+=t*this.aspectRatio>e?t*this.aspectRatio:e,this.cropper.y1+=t*this.aspectRatio>e?t:e/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,e=Math.max(this.cropper.x2-this.maxSize.width,0),t=Math.max(0-this.cropper.y1,0),(e>0||t>0)&&(this.cropper.x2-=t*this.aspectRatio>e?t*this.aspectRatio:e,this.cropper.y1+=t*this.aspectRatio>e?t:e/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,e=Math.max(this.cropper.x2-this.maxSize.width,0),t=Math.max(this.cropper.y2-this.maxSize.height,0),(e>0||t>0)&&(this.cropper.x2-=t*this.aspectRatio>e?t*this.aspectRatio:e,this.cropper.y2-=t*this.aspectRatio>e?t:e/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,e=Math.max(0-this.cropper.x1,0),t=Math.max(this.cropper.y2-this.maxSize.height,0),(e>0||t>0)&&(this.cropper.x1+=t*this.aspectRatio>e?t*this.aspectRatio:e,this.cropper.y2-=t*this.aspectRatio>e?t:e/this.aspectRatio)}}},{key:"doAutoCrop",value:function(){this.autoCrop&&this.crop()}},{key:"crop",value:function(){if(this.sourceImage&&this.sourceImage.nativeElement&&null!=this.transformedImage){this.startCropImage.emit();var e=this.getImagePosition(),t=e.x2-e.x1,i=e.y2-e.y1,a=document.createElement("canvas");a.width=t,a.height=i;var r=a.getContext("2d");if(r){null!=this.backgroundColor&&(r.fillStyle=this.backgroundColor,r.fillRect(0,0,t,i));var o=(this.transform.scale||1)*(this.transform.flipH?-1:1),n=(this.transform.scale||1)*(this.transform.flipV?-1:1);r.setTransform(o,0,0,n,this.transformedSize.width/2,this.transformedSize.height/2),r.translate(-e.x1/o,-e.y1/n),r.rotate((this.transform.rotate||0)*Math.PI/180),r.drawImage(this.transformedImage,-this.transformedSize.width/2,-this.transformedSize.height/2);var c={width:t,height:i,imagePosition:e,cropperPosition:Object.assign({},this.cropper)};this.containWithinAspectRatio&&(c.offsetImagePosition=this.getOffsetImagePosition());var s=this.getResizeRatio(t,i);return 1!==s&&(c.width=Math.round(t*s),c.height=this.maintainAspectRatio?Math.round(c.width/this.aspectRatio):Math.round(i*s),function(e,t,i){var a=e.width,r=e.height,o=a/(t=Math.round(t)),n=r/(i=Math.round(i)),c=Math.ceil(o/2),s=Math.ceil(n/2),h=e.getContext("2d");if(h){for(var l=h.getImageData(0,0,a,r),p=h.createImageData(t,i),u=l.data,g=p.data,d=0;d<i;d++)for(var m=0;m<t;m++){var f=4*(m+d*t),b=d*n,v=0,y=0,C=0,w=0,M=0,x=0,S=0,I=Math.floor(m*o),k=Math.floor(d*n),z=Math.ceil((m+1)*o),A=Math.ceil((d+1)*n);z=Math.min(z,a),A=Math.min(A,r);for(var P=k;P<A;P++)for(var O=Math.abs(b-P)/s,D=m*o,_=O*O,R=I;R<z;R++){var E=Math.abs(D-R)/c,F=Math.sqrt(_+E*E);if(!(F>=1)){var T=4*(R+P*a);S+=(v=2*F*F*F-3*F*F+1)*u[T+3],C+=v,u[T+3]<255&&(v=v*u[T+3]/250),w+=v*u[T],M+=v*u[T+1],x+=v*u[T+2],y+=v}}g[f]=w/y,g[f+1]=M/y,g[f+2]=x/y,g[f+3]=S/C}e.width=t,e.height=i,h.putImageData(p,0,0)}}(a,c.width,c.height)),c.base64=this.cropToBase64(a),this.imageCropped.emit(c),c}}return null}},{key:"getImagePosition",value:function(){var e=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth,t={x1:Math.round(this.cropper.x1*e),y1:Math.round(this.cropper.y1*e),x2:Math.round(this.cropper.x2*e),y2:Math.round(this.cropper.y2*e)};return this.containWithinAspectRatio||(t.x1=Math.max(t.x1,0),t.y1=Math.max(t.y1,0),t.x2=Math.min(t.x2,this.transformedSize.width),t.y2=Math.min(t.y2,this.transformedSize.height)),t}},{key:"getOffsetImagePosition",value:function(){var e,t,i=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth;(this.canvasRotation+this.exifTransform.rotate)%2?(e=(this.transformedSize.width-this.originalSize.height)/2,t=(this.transformedSize.height-this.originalSize.width)/2):(e=(this.transformedSize.width-this.originalSize.width)/2,t=(this.transformedSize.height-this.originalSize.height)/2);var a={x1:Math.round(this.cropper.x1*i)-e,y1:Math.round(this.cropper.y1*i)-t,x2:Math.round(this.cropper.x2*i)-e,y2:Math.round(this.cropper.y2*i)-t};return this.containWithinAspectRatio||(a.x1=Math.max(a.x1,0),a.y1=Math.max(a.y1,0),a.x2=Math.min(a.x2,this.transformedSize.width),a.y2=Math.min(a.y2,this.transformedSize.height)),a}},{key:"cropToBase64",value:function(e){return e.toDataURL("image/"+this.format,this.getQuality())}},{key:"getQuality",value:function(){return Math.min(1,Math.max(0,this.imageQuality/100))}},{key:"getResizeRatio",value:function(e,t){if(this.resizeToWidth>0){if(!this.onlyScaleDown||e>this.resizeToWidth)return this.resizeToWidth/e}else if(this.resizeToHeight>0&&(!this.onlyScaleDown||t>this.resizeToHeight))return this.resizeToHeight/t;return 1}},{key:"getClientX",value:function(e){return(e.touches&&e.touches[0]?e.touches[0].clientX:e.clientX)||0}},{key:"getClientY",value:function(e){return(e.touches&&e.touches[0]?e.touches[0].clientY:e.clientY)||0}},{key:"imageChangedEvent",set:function(e){this.initCropper(),e&&e.target&&e.target.files&&e.target.files.length>0&&this.loadImageFile(e.target.files[0])}},{key:"imageBase64",set:function(e){this.initCropper(),this.checkExifAndLoadBase64Image(e)}},{key:"imageFile",set:function(e){this.initCropper(),e&&this.loadImageFile(e)}}]),e}()).\u0275fac=function(e){return new(e||q)(s.Vb(C.b),s.Vb(s.i))},q.\u0275cmp=s.Pb({type:q,selectors:[["image-cropper"]],viewQuery:function(e,t){var i;1&e&&s.Qc(L,!0),2&e&&s.zc(i=s.kc())&&(t.sourceImage=i.first)},hostVars:4,hostBindings:function(e,t){1&e&&s.jc("resize",(function(e){return t.onResize()}),!1,s.Cc)("mousemove",(function(e){return t.moveImg(e)}),!1,s.Bc)("touchmove",(function(e){return t.moveImg(e)}),!1,s.Bc)("mouseup",(function(e){return t.moveStop()}),!1,s.Bc)("touchend",(function(e){return t.moveStop()}),!1,s.Bc),2&e&&(s.Jc("text-align",t.alignImage),s.Mb("disabled",t.disabled))},inputs:{format:"format",maintainAspectRatio:"maintainAspectRatio",transform:"transform",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",containWithinAspectRatio:"containWithinAspectRatio",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",imageChangedEvent:"imageChangedEvent",imageBase64:"imageBase64",imageFile:"imageFile",backgroundColor:"backgroundColor"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[s.Gb()],decls:4,vars:10,consts:[["class","source-image",3,"src","visibility","transform","load",4,"ngIf"],[1,"overlay"],["class","cropper","tabindex","0",3,"rounded","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"source-image",3,"src","load"],["sourceImage",""],["tabindex","0",1,"cropper",3,"keydown"],[1,"move",3,"mousedown","touchstart"],[1,"resize","topleft",3,"mousedown","touchstart"],[1,"square"],[1,"resize","top"],[1,"resize","topright",3,"mousedown","touchstart"],[1,"resize","right"],[1,"resize","bottomright",3,"mousedown","touchstart"],[1,"resize","bottom"],[1,"resize","bottomleft",3,"mousedown","touchstart"],[1,"resize","left"],[1,"resize-bar","top",3,"mousedown","touchstart"],[1,"resize-bar","right",3,"mousedown","touchstart"],[1,"resize-bar","bottom",3,"mousedown","touchstart"],[1,"resize-bar","left",3,"mousedown","touchstart"]],template:function(e,t){1&e&&(s.bc(0,"div"),s.Kc(1,j,2,5,"img",0),s.Wb(2,"div",1),s.Kc(3,U,23,14,"div",2),s.ac()),2&e&&(s.Jc("background",t.imageVisible&&t.backgroundColor,s.Ob),s.Ib(1),s.rc("ngIf",t.safeImgDataUrl),s.Ib(1),s.Jc("width",t.maxSize.width,"px")("height",t.maxSize.height,"px")("margin-left","center"===t.alignImage?t.marginLeft:null),s.Ib(1),s.rc("ngIf",t.imageVisible))},directives:[n.m],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{position:relative;width:100%}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;top:0;left:0;outline:#fff solid 100vw}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;touch-action:none;outline:rgba(255,255,255,.3) solid 100vw}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:focus   .move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3)}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3)}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),q),K=((H=function e(){_classCallCheck(this,e)}).\u0275mod=s.Tb({type:H}),H.\u0275inj=s.Sb({factory:function(e){return new(e||H)},imports:[[n.c]]}),H);function Q(e,t){1&e&&s.Wb(0,"app-loading")}function Y(e,t){1&e&&(s.bc(0,"small",42),s.Mc(1," campo obligatorio "),s.ac())}function G(e,t){1&e&&(s.bc(0,"small",42),s.Mc(1," campo obligatorio "),s.ac())}function N(e,t){1&e&&(s.bc(0,"small",42),s.Mc(1," campo obligatorio "),s.ac())}function J(e,t){1&e&&(s.bc(0,"small",42),s.Mc(1," campo obligatorio "),s.ac())}function X(e,t){1&e&&(s.bc(0,"small",42),s.Mc(1," campo obligatorio "),s.ac())}function Z(e,t){1&e&&(s.bc(0,"small",42),s.Mc(1," campo obligatorio "),s.ac())}function $(e,t){1&e&&(s.bc(0,"small",42),s.Mc(1," campo obligatorio "),s.ac())}function ee(e,t){if(1&e&&(s.bc(0,"form",28),s.bc(1,"div",29),s.bc(2,"label"),s.Mc(3,"Fecha y hora"),s.ac(),s.bc(4,"div",30),s.bc(5,"div",31),s.bc(6,"span",32),s.Wb(7,"i",33),s.ac(),s.ac(),s.Wb(8,"input",34),s.ac(),s.Kc(9,Y,2,0,"small",35),s.ac(),s.bc(10,"div",29),s.bc(11,"label"),s.Mc(12,"Infracci\xf3n"),s.ac(),s.Wb(13,"ng-select",36),s.Kc(14,G,2,0,"small",35),s.ac(),s.bc(15,"div",29),s.bc(16,"label"),s.Mc(17,"Lugar"),s.ac(),s.Wb(18,"input",37),s.Kc(19,N,2,0,"small",35),s.ac(),s.bc(20,"div",29),s.bc(21,"label"),s.Mc(22,"Denunciante"),s.ac(),s.Wb(23,"input",38),s.Kc(24,J,2,0,"small",35),s.ac(),s.bc(25,"div",29),s.bc(26,"label"),s.Mc(27,"v\xedctima"),s.ac(),s.Wb(28,"input",39),s.Kc(29,X,2,0,"small",35),s.ac(),s.bc(30,"div",29),s.bc(31,"label"),s.Mc(32,"Denunciado/Agresor"),s.ac(),s.bc(33,"div",30),s.Wb(34,"input",40),s.ac(),s.Kc(35,Z,2,0,"small",35),s.ac(),s.bc(36,"div",29),s.bc(37,"label"),s.Mc(38,"Caso a determinar"),s.ac(),s.Wb(39,"input",41),s.Kc(40,$,2,0,"small",35),s.ac(),s.ac()),2&e){var i=s.lc(2);s.rc("formGroup",i.Forma),s.Ib(9),s.rc("ngIf",i.Forma.get("fecha").touched&&i.Forma.get("fecha").hasError("required")),s.Ib(4),s.rc("items",i.arrayTipoDelito)("loading",!1),s.Ib(1),s.rc("ngIf",i.Forma.get("nsec_TipoDelito").touched&&i.Forma.get("nsec_TipoDelito").hasError("required")),s.Ib(5),s.rc("ngIf",i.Forma.get("lugar").touched&&i.Forma.get("lugar").hasError("required")),s.Ib(5),s.rc("ngIf",i.Forma.get("denunciante").touched&&i.Forma.get("denunciante").hasError("required")),s.Ib(5),s.rc("ngIf",i.Forma.get("victima").touched&&i.Forma.get("victima").hasError("required")),s.Ib(6),s.rc("ngIf",i.Forma.get("denunciadoAgresor").touched&&i.Forma.get("denunciadoAgresor").hasError("required")),s.Ib(5),s.rc("ngIf",i.Forma.get("casoDeterminar").touched&&i.Forma.get("casoDeterminar").hasError("required"))}}function te(e,t){if(1&e&&(s.bc(0,"ul"),s.bc(1,"li"),s.Mc(2),s.ac(),s.ac()),2&e){var i=t.$implicit;s.Ib(2),s.Nc(i.message)}}function ie(e,t){if(1&e&&(s.bc(0,"div",16),s.bc(1,"alert",43),s.bc(2,"h4",44),s.Mc(3,"Advertencia!"),s.ac(),s.bc(4,"p"),s.Mc(5,"La camara web no esta disponible, pero puede cargar la fotograf\xeda manualmente"),s.ac(),s.Kc(6,te,3,1,"ul",45),s.ac(),s.bc(7,"form",46),s.Wb(8,"app-requisito-uploader",47),s.ac(),s.ac()),2&e){var i=s.lc(2);s.Ib(6),s.rc("ngForOf",i.errors),s.Ib(1),s.rc("formGroup",i.FormaArchivo),s.Ib(1),s.rc("placeholder","Subir fotograf\xeda...")}}function ae(e,t){if(1&e){var i=s.cc();s.Zb(0),s.bc(1,"webcam",48),s.jc("imageCapture",(function(e){return s.Dc(i),s.lc(2).handleImage(e)}))("cameraSwitched",(function(e){return s.Dc(i),s.lc(2).cameraWasSwitched(e)}))("initError",(function(e){return s.Dc(i),s.lc(2).handleInitError(e)})),s.ac(),s.bc(2,"button",49),s.jc("click",(function(e){return s.Dc(i),s.lc(2).triggerSnapshot()})),s.Wb(3,"i",50),s.Mc(4,"Capturar"),s.ac(),s.Yb()}if(2&e){var a=s.lc(2);s.Ib(1),s.rc("height",400)("width",400)("trigger",a.triggerObservable)("allowCameraSwitch",a.allowCameraSwitch)("switchCamera",a.nextWebcamObservable)("videoOptions",a.videoOptions)("imageQuality",1)}}function re(e,t){if(1&e&&(s.Zb(0),s.bc(1,"div",51),s.Wb(2,"img",52),s.ac(),s.Yb()),2&e){var i=s.lc(2);s.Ib(2),s.rc("src",i.obtenerImagenWebCam(),s.Fc)}}function oe(e,t){if(1&e){var i=s.cc();s.bc(0,"div",4),s.bc(1,"div",5),s.bc(2,"div",6),s.bc(3,"div",7),s.bc(4,"div",8),s.bc(5,"h4",9),s.Wb(6,"i",10),s.Mc(7),s.ac(),s.ac(),s.bc(8,"div",11),s.bc(9,"div",12),s.bc(10,"div",13),s.Kc(11,ee,41,10,"form",14),s.ac(),s.bc(12,"div",15),s.bc(13,"div",12),s.bc(14,"div",16),s.bc(15,"div",7),s.bc(16,"div",8),s.bc(17,"h4",9),s.Wb(18,"i",17),s.Mc(19," Fotograf\xeda"),s.ac(),s.ac(),s.bc(20,"div",18),s.bc(21,"div",12),s.Kc(22,ie,9,3,"div",19),s.bc(23,"div",20),s.Kc(24,ae,5,7,"ng-container",21),s.ac(),s.bc(25,"div",20),s.Wb(26,"hr"),s.Kc(27,re,3,1,"ng-container",21),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(28,"div",16),s.bc(29,"div",22),s.bc(30,"button",23),s.jc("click",(function(e){return s.Dc(i),s.lc().validar()})),s.Wb(31,"i",24),s.Mc(32,"Guardar "),s.ac(),s.bc(33,"button",25),s.jc("click",(function(e){return s.Dc(i),s.lc().cancelar()})),s.Wb(34,"i",26),s.Mc(35," Cancelar "),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.Wb(36,"app-loading-ngx",27)}if(2&e){var a=s.lc(),r=s.Ac(5),o=s.Ac(7);s.Ib(7),s.Oc(" ",a.titulo,""),s.Ib(4),s.rc("ngIf",a.Forma),s.Ib(11),s.rc("ngIf",!a.showWebcam&&r),s.Ib(2),s.rc("ngIf",a.showWebcam)("ngIfElse",r),s.Ib(3),s.rc("ngIf",a.webcamImage)("ngIfElse",o),s.Ib(9),s.rc("loading",a.loadingPantalla)}}function ne(e,t){if(1&e){var i=s.cc();s.bc(0,"app-error-page",53),s.jc("recargarChange",(function(e){return s.Dc(i),s.lc().reload()})),s.ac()}}function ce(e,t){if(1&e){var i=s.cc();s.Wb(0,"hr"),s.bc(1,"image-cropper",54),s.jc("imageCropped",(function(e){return s.Dc(i),s.lc().imageCropped(e)}))("imageLoaded",(function(e){return s.Dc(i),s.lc().imageLoaded()}))("cropperReady",(function(e){return s.Dc(i),s.lc().cropperReady()}))("loadImageFailed",(function(e){return s.Dc(i),s.lc().loadImageFailed()})),s.ac()}if(2&e){var a=s.lc();s.Ib(1),s.rc("imageFile",a.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToWidth",400)}}function se(e,t){if(1&e&&(s.bc(0,"div",51),s.Wb(1,"img",55),s.ac()),2&e){var i=s.lc();s.Ib(1),s.Jc("border",i.croppedImage?"1px solid black":"none"),s.rc("src",i.croppedImage,s.Fc)}}var he,le=((he=function(){function e(t,i,a,r,o,n,c){_classCallCheck(this,e),this.router=t,this.datePipe=i,this.activatedRoute=a,this.fb=r,this.metodosGlobales=o,this.denucianServie=n,this.tipoDelitoService=c,this.EstadoPagina=d.d,this.banderaEstado=d.d.Cargando,this.objPersona={},this.arrayTipoDelito=[],this.unsubscribe$=new f.a,this.loadingPantalla=!1,this.imageChangedEvent="",this.croppedImage="",this.croppedImageFile="",this.showWebcam=!0,this.allowCameraSwitch=!1,this.multipleWebcamsAvailable=!1,this.videoOptions={},this.errors=[],this.webcamImage=null,this.trigger=new f.a,this.nextWebcam=new f.a,this.iniciarFormulario(this.fb),this.FormaArchivo=r.group({archivo:[null,l.w.required]})}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"ngOnInit",value:function(){var e=this;this.titulo="Registro de Denuncias",this.traerTipoDelito(),this.FormaArchivo.get("archivo").valueChanges.subscribe((function(t){t||(e.croppedImage=""),e.imageChangedEvent=t}))}},{key:"reload",value:function(){this.banderaEstado=d.d.Cargando,this.traerTipoDelito()}},{key:"iniciarFormulario",value:function(e){this.Forma=e.group({num_sec:[0],fecha:["",l.w.compose([l.w.required])],nsec_TipoDelito:["",l.w.compose([l.w.required])],lugar:["",l.w.compose([l.w.required])],denunciante:["",l.w.compose([l.w.required])],victima:["",l.w.compose([l.w.required])],denunciadoAgresor:["",l.w.compose([l.w.required])],casoDeterminar:["",l.w.compose([l.w.required])],image:[null]})}},{key:"traerTipoDelito",value:function(){var e=this;this.tipoDelitoService.traerTipoDelito().pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){e.arrayTipoDelito=t.response,e.activatedRoute.params.subscribe((function(t){t.num_sec?(e.titulo="Modificaciar denuncia",e.banderaModifica=!0,e.denucianServie.traerPorCodigo(t.num_sec).subscribe((function(t){e.metodosGlobales.validaError(t,!1)?(e.Forma.patchValue(t.response),e.croppedImage=e.Forma.get("image").value,e.banderaEstado=d.d.Ok):e.banderaEstado=d.d.Error}))):e.banderaEstado=d.d.Ok}))}))}},{key:"validar",value:function(){var e=this;this.Forma.markAllAsTouched(),this.Forma.valid&&u.a.fire(g.b).then((function(t){t.value&&e.guardar()}))}},{key:"guardar",value:function(){var e=this;this.loadingPantalla=!0,this.denucianServie.guardar(this.Forma.value).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(t){e.metodosGlobales.validaError(t)&&e.activatedRoute.params.subscribe((function(t){t.num_sec?e.router.navigate(["operaciones","denuncias","buscar"]):(e.loadingPantalla=!1,e.iniciarFormulario(e.fb),e.FormaArchivo.get("archivo").setValue(null),e.croppedImage="")}))}))}},{key:"cancelar",value:function(){this.banderaModifica?this.router.navigate(["operaciones","denuncias","buscar"]):(this.iniciarFormulario(this.fb),this.FormaArchivo.get("archivo").setValue(null),this.croppedImage="")}},{key:"actualizarForma",value:function(e){Object.assign(this.objPersona,e)}},{key:"triggerSnapshot",value:function(){this.trigger.next()}},{key:"handleInitError",value:function(e){console.log(e,"error del webcam"),this.errors.push(e),this.showWebcam=!1}},{key:"handleImage",value:function(e){console.info("received webcam image",e),this.webcamImage=e}},{key:"cameraWasSwitched",value:function(e){console.log("active device: "+e),this.deviceId=e}},{key:"fileChangeEvent",value:function(e){this.imageChangedEvent=e}},{key:"imageCropped",value:function(e){this.croppedImage=e.base64,this.Forma.get("image").setValue(this.croppedImage)}},{key:"imageLoaded",value:function(){}},{key:"cropperReady",value:function(){}},{key:"loadImageFailed",value:function(){}},{key:"obtenerImagenWebCam",value:function(){return this.Forma.get("image").setValue(this.webcamImage.imageAsBase64),this.webcamImage.imageAsDataUrl}},{key:"triggerObservable",get:function(){return this.trigger.asObservable()}},{key:"nextWebcamObservable",get:function(){return this.nextWebcam.asObservable()}}]),e}()).\u0275fac=function(e){return new(e||he)(s.Vb(c.e),s.Vb(n.e),s.Vb(c.a),s.Vb(l.e),s.Vb(d.i),s.Vb(m.c),s.Vb(m.l))},he.\u0275cmp=s.Pb({type:he,selectors:[["app-nuevo"]],decls:8,vars:4,consts:[[3,"ngSwitch"],[3,"ngSwitchCase"],["cargaFoto",""],["cropImage",""],[1,"animated","fadeIn"],[1,"row","justify-content-center"],[1,"col-xl-10","col-md-8"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header"],[1,"mb-0"],[1,"fa","fa-save"],[1,"card-body","pt-0"],[1,"row"],[1,"col-md-5"],["class","text-left mt-4",3,"formGroup",4,"ngIf"],[1,"col-md-7"],[1,"col-md-12"],[1,"fa","fa-camera"],[1,"card-body"],["class","col-md-12",4,"ngIf"],[1,"col-md-6"],[4,"ngIf","ngIfElse"],[1,"form-group","text-center","mt-5"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-save","mr-2"],["type","button",1,"btn","btn-secondary","ml-1",3,"click"],[1,"fa","fa-remove","mr-2"],[3,"loading"],[1,"text-left","mt-4",3,"formGroup"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar-o"],["formControlName","fecha","type","datetime-local",1,"form-control","validation-field"],["class","text-danger",4,"ngIf"],["formControlName","nsec_TipoDelito","name","nsec_TipoDelito","bindLabel","nombre","bindValue","num_sec",1,"custom","text-uppercase",3,"items","loading"],["formControlName","lugar","type","text",1,"form-control","validation-field","text-uppercase"],["formControlName","denunciante","type","text",1,"form-control","validation-field","text-uppercase"],["formControlName","victima","type","text",1,"form-control","validation-field","text-uppercase"],["formControlName","denunciadoAgresor","type","text",1,"form-control","validation-field","text-uppercase"],["formControlName","casoDeterminar","type","text",1,"form-control","validation-field","text-uppercase"],[1,"text-danger"],["type","warning"],[1,"alert-heading"],[4,"ngFor","ngForOf"],[3,"formGroup"],["formControlName","archivo",3,"placeholder"],[3,"height","width","trigger","allowCameraSwitch","switchCamera","videoOptions","imageQuality","imageCapture","cameraSwitched","initError"],["type","button",1,"btn","btn-primary","btn-block","btn-capturar",3,"click"],[1,"fa","fa-camera","mr-2"],[1,"pictureFrame"],[3,"src"],[3,"recargarChange"],["format","png",3,"imageFile","maintainAspectRatio","aspectRatio","resizeToWidth","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[1,"w-100",3,"src"]],template:function(e,t){1&e&&(s.Zb(0,0),s.Kc(1,Q,1,0,"ng-template",1),s.Kc(2,oe,37,8,"ng-template",1),s.Kc(3,ne,1,0,"ng-template",1),s.Yb(),s.Kc(4,ce,2,4,"ng-template",null,2,s.Lc),s.Kc(6,se,2,3,"ng-template",null,3,s.Lc)),2&e&&(s.rc("ngSwitch",t.banderaEstado),s.Ib(1),s.rc("ngSwitchCase",t.EstadoPagina.Cargando),s.Ib(1),s.rc("ngSwitchCase",t.EstadoPagina.Ok),s.Ib(1),s.rc("ngSwitchCase",t.EstadoPagina.Error))},directives:[n.o,n.p,v.a,n.m,S,l.y,l.o,l.i,l.b,l.n,l.g,I.a,k.a,n.l,A,T,V.a,B],styles:[""]}),he),pe=i("lDzL"),ue=i("Mfq2");function ge(e,t){1&e&&s.Wb(0,"app-loading")}function de(e,t){1&e&&(s.bc(0,"div",29),s.bc(1,"div",30),s.Wb(2,"i",31),s.bc(3,"h5",32),s.Mc(4," No se encontr\xf3 ning\xfan resultado"),s.ac(),s.ac(),s.ac())}var me=function(e){return["/operaciones/denuncias/modificar",e]};function fe(e,t){if(1&e&&(s.bc(0,"div",44),s.bc(1,"button",45),s.Wb(2,"i",46),s.ac(),s.ac()),2&e){var i=t.value;s.Ib(1),s.rc("routerLink",s.uc(2,me,i))("adaptivePosition",!1)}}function be(e,t){if(1&e){var i=s.cc();s.bc(0,"div",44),s.bc(1,"button",47),s.jc("click",(function(e){s.Dc(i);var a=t.value;return s.lc(3).eliminar(a)})),s.Wb(2,"i",48),s.ac(),s.ac()}2&e&&(s.Ib(1),s.rc("adaptivePosition",!1))}function ve(e,t){1&e&&s.Mc(0),2&e&&s.Oc(" ",t.value," ")}function ye(e,t){1&e&&s.Mc(0),2&e&&s.Oc(" ",t.value," ")}function Ce(e,t){1&e&&s.Mc(0),2&e&&s.Oc(" ",t.value," ")}function we(e,t){1&e&&s.Mc(0),2&e&&s.Oc(" ",t.value," ")}function Me(e,t){1&e&&s.Mc(0),2&e&&s.Oc(" ",t.value," ")}function xe(e,t){1&e&&s.Mc(0),2&e&&s.Oc(" ",t.value," ")}function Se(e,t){1&e&&s.Wb(0,"img",49),2&e&&s.rc("src",t.value,s.Fc)}function Ie(e,t){if(1&e){var i=s.cc();s.bc(0,"ngx-datatable",33,34),s.jc("page",(function(e){return s.Dc(i),s.lc(2).buscarPaginado(e)})),s.bc(2,"ngx-datatable-column",35),s.Kc(3,fe,3,4,"ng-template",36),s.ac(),s.bc(4,"ngx-datatable-column",35),s.Kc(5,be,3,1,"ng-template",36),s.ac(),s.bc(6,"ngx-datatable-column",37),s.Kc(7,ve,1,1,"ng-template",36),s.ac(),s.bc(8,"ngx-datatable-column",38),s.Kc(9,ye,1,1,"ng-template",36),s.ac(),s.bc(10,"ngx-datatable-column",39),s.Kc(11,Ce,1,1,"ng-template",36),s.ac(),s.bc(12,"ngx-datatable-column",40),s.Kc(13,we,1,1,"ng-template",36),s.ac(),s.bc(14,"ngx-datatable-column",41),s.Kc(15,Me,1,1,"ng-template",36),s.ac(),s.bc(16,"ngx-datatable-column",42),s.Kc(17,xe,1,1,"ng-template",36),s.ac(),s.bc(18,"ngx-datatable-column",43),s.Kc(19,Se,1,1,"ng-template",36),s.ac(),s.ac()}if(2&e){var a=s.lc(2);s.rc("rows",a.array)("headerHeight",40)("columnMode","force")("footerHeight",50)("rowHeight","auto")("loadingIndicator",a.banderaCargando)("externalPaging",!0)("count",a.paginado.totalElementos)("limit",a.paginado.cantidadMostrar)("offset",a.paginado.numeroPaginaActual)("scrollbarH",!0),s.Ib(2),s.rc("width",55),s.Ib(2),s.rc("width",55),s.Ib(14),s.rc("width",60)}}function ke(e,t){if(1&e){var i=s.cc();s.bc(0,"div",2),s.bc(1,"div",3),s.bc(2,"div",4),s.bc(3,"h4",5),s.Wb(4,"i",6),s.Mc(5," Listado de denuncias "),s.ac(),s.ac(),s.bc(6,"div",7),s.bc(7,"form",8),s.bc(8,"div",9),s.bc(9,"div",10),s.bc(10,"strong"),s.bc(11,"label",11),s.Mc(12,"Mostrar:"),s.ac(),s.ac(),s.ac(),s.bc(13,"div",10),s.bc(14,"select",12),s.jc("change",(function(e){return s.Dc(i),s.lc().numeroRegistrosMostrados(e)})),s.bc(15,"option",13),s.Mc(16,"5"),s.ac(),s.bc(17,"option",14),s.Mc(18,"10"),s.ac(),s.bc(19,"option",15),s.Mc(20,"30"),s.ac(),s.bc(21,"option",16),s.Mc(22,"50"),s.ac(),s.ac(),s.ac(),s.bc(23,"div",10),s.bc(24,"strong"),s.bc(25,"label",17),s.Mc(26,"Filtrar Por:"),s.ac(),s.ac(),s.ac(),s.bc(27,"div",18),s.bc(28,"select",19),s.jc("ngModelChange",(function(e){return s.Dc(i),s.lc().busqueda.parametro=e})),s.bc(29,"option",20),s.Mc(30,"Delito"),s.ac(),s.bc(31,"option",21),s.Mc(32,"Denunciante"),s.ac(),s.bc(33,"option",22),s.Mc(34,"Victima"),s.ac(),s.bc(35,"option",23),s.Mc(36,"Denunciado Agresor"),s.ac(),s.ac(),s.ac(),s.bc(37,"div",24),s.bc(38,"input",25),s.jc("ngModelChange",(function(e){return s.Dc(i),s.lc().busqueda.valor=e})),s.ac(),s.ac(),s.bc(39,"div",10),s.bc(40,"button",26),s.jc("click",(function(e){return s.Dc(i),s.lc().buscarPaginado({offset:0})})),s.Wb(41,"i",6),s.Mc(42," Buscar "),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.Kc(43,de,5,0,"div",27),s.Kc(44,Ie,20,14,"ng-template",null,28,s.Lc),s.ac()}if(2&e){var a=s.Ac(45),r=s.lc();s.Ib(28),s.rc("ngModel",r.busqueda.parametro),s.Ib(10),s.rc("ngModel",r.busqueda.valor),s.Ib(5),s.rc("ngIf",0==r.array.length&&!r.banderaCargando)("ngIfElse",a)}}function ze(e,t){if(1&e){var i=s.cc();s.bc(0,"app-error-page",50),s.jc("recargarChange",(function(e){return s.Dc(i),s.lc().reload()})),s.ac()}}var Ae,Pe,Oe=[{path:"",component:h,resolve:{},children:[{path:"nuevo",component:le,data:{breadcrumb:"Operaciones / Denuncias / Nuevo"}},{path:"modificar/:num_sec",component:le,data:{breadcrumb:"Operaciones / Denuncias / Modificar"}},{path:"buscar",component:(Ae=function(){function e(t,i){_classCallCheck(this,e),this.metodosGlobales=t,this.denunciaService=i,this.paginado=new d.j,this.banderaCargando=!1,this.EstadoPagina=d.d,this.banderaEstado=d.d.Cargando,this.unsubscribe$=new f.a,this.array=[],this.busqueda={valor:"",parametro:"td.nombre"}}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"ngOnInit",value:function(){this.cargarData()}},{key:"cargarData",value:function(){this.paginado.numeroPaginaActual=0,this.paginado.cantidadMostrar=5,this.buscarPaginado({offset:0})}},{key:"reload",value:function(){this.banderaEstado=d.d.Cargando,this.cargarData()}},{key:"buscarPaginado",value:function(e){var t=this;this.banderaCargando=!0,this.paginado.numeroPaginaActual=e.offset,this.denunciaService.buscarPaginado(this.busqueda.valor,this.busqueda.parametro,this.paginado.numeroPaginaActual,this.paginado.cantidadMostrar).pipe(Object(b.a)(this.unsubscribe$)).subscribe((function(e){t.metodosGlobales.validaError(e,!1)?(t.paginado.totalElementos=Number(e.total),t.paginado.cantidadMostrar=t.paginado.cantidadMostrar,t.array=e.response,t.banderaCargando=!1,t.banderaEstado=d.d.Ok):t.banderaEstado=d.d.Error}),(function(e){t.banderaCargando=!1,t.banderaEstado=d.d.Error}))}},{key:"numeroRegistrosMostrados",value:function(e){this.paginado.cantidadMostrar=e.srcElement.value,this.paginado.numeroPaginaActual=0,this.buscarPaginado({offset:this.paginado.numeroPaginaActual})}},{key:"eliminar",value:function(e){var t=this;u.a.fire(Object(g.c)("\xbfEst\xe1 seguro de Eliminar el Registro?")).then((function(i){!0===i.value&&t.denunciaService.eliminar(e).pipe(Object(b.a)(t.unsubscribe$)).subscribe((function(e){t.metodosGlobales.validaError(e)&&t.buscarPaginado({offset:t.paginado.numeroPaginaActual})}))}))}}]),e}(),Ae.\u0275fac=function(e){return new(e||Ae)(s.Vb(d.i),s.Vb(m.c))},Ae.\u0275cmp=s.Pb({type:Ae,selectors:[["app-buscar"]],decls:4,vars:4,consts:[[3,"ngSwitch"],[3,"ngSwitchCase"],[1,"animated","fadeIn"],[1,"card","border-0","box-shadow","rounded-0","mb-0"],[1,"card-header"],[1,"mb-0"],[1,"fa","fa-search"],[1,"card-body","pt-0"],[1,"mt-4"],[1,"form-row"],[1,"form-group","col-md-1"],["for","inlineFormCustomSelectPrefMostrar"],["id","inlineFormCustomSelectPrefMostrar",1,"custom-select",3,"change"],["selected","","value","5"],["value","10"],["value","30"],["value","50"],["for","inlineFormCustomSelectPref"],[1,"form-group","col-md-3"],["name","parametro","id","inlineFormCustomSelectPref",1,"custom-select",3,"ngModel","ngModelChange"],["selected","","value","td.nombre"],["value","Denunciante"],["value","Victima"],["value","DenunciadoAgresor"],[1,"form-group","col-md-5"],["name","valor","type","text","id","inlineFormInputName2","placeholder","Buscar",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-primary","my-1",3,"click"],["class","card mb-3",4,"ngIf","ngIfElse"],["show",""],[1,"card","mb-3"],[1,"card-body","text-center","p-2"],[1,"fa","fa-inbox","fa-2x"],[1,"card-title"],[1,"material",3,"rows","headerHeight","columnMode","footerHeight","rowHeight","loadingIndicator","externalPaging","count","limit","offset","scrollbarH","page"],["table",""],["name","","prop","num_sec",3,"width"],["ngx-datatable-cell-template",""],["name","Fecha","prop","fecha"],["name","Delito","prop","delito"],["name","Denunciante","prop","denunciante"],["name","Victima","prop","victima"],["name","Denunciado/Agresor","prop","denunciadoAgresor"],["name","CasoDeterminar","prop","casoDeterminar"],["name","Foto","prop","image",3,"width"],[1,"text-center"],["placement","right","tooltip","Modificar",1,"btn","btn-sm","btn-primary",3,"routerLink","adaptivePosition"],[1,"fa","fa-pencil"],["placement","right","tooltip","Eliminar",1,"btn","btn-sm","btn-danger",3,"adaptivePosition","click"],[1,"fa","fa-trash"],["width","70",3,"src"],[3,"recargarChange"]],template:function(e,t){1&e&&(s.Zb(0,0),s.Kc(1,ge,1,0,"ng-template",1),s.Kc(2,ke,46,4,"ng-template",1),s.Kc(3,ze,1,0,"ng-template",1),s.Yb()),2&e&&(s.rc("ngSwitch",t.banderaEstado),s.Ib(1),s.rc("ngSwitchCase",t.EstadoPagina.Cargando),s.Ib(1),s.rc("ngSwitchCase",t.EstadoPagina.Ok),s.Ib(1),s.rc("ngSwitchCase",t.EstadoPagina.Error))},directives:[n.o,n.p,v.a,l.y,l.o,l.p,l.r,l.x,l.v,l.n,l.q,l.b,n.m,pe.c,pe.b,pe.a,ue.a,c.f,V.a],styles:[""]}),Ae),data:{breadcrumb:"Operaciones / Denuncias / Buscar"}}]}],De=((Pe=function e(){_classCallCheck(this,e)}).\u0275mod=s.Tb({type:Pe}),Pe.\u0275inj=s.Sb({factory:function(e){return new(e||Pe)},imports:[[c.h.forChild(Oe)],c.h]}),Pe);i.d(t,"DenunciasModule",(function(){return Re}));var _e,Re=((_e=function e(){_classCallCheck(this,e)}).\u0275mod=s.Tb({type:_e}),_e.\u0275inj=s.Sb({factory:function(e){return new(e||_e)},imports:[[n.c,De,g.a,W,K]]}),_e)}}]);