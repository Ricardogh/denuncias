(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{vrWj:function(o,e,a){"use strict";a.r(e);var r=a("ofXK"),t=a("tyNb"),c=a("fXoL");let n=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=c.Pb({type:o,selectors:[["app-rol"]],decls:1,vars:0,template:function(o,e){1&o&&c.Wb(0,"router-outlet")},directives:[t.i],styles:[""]}),o})();var i=a("3Pt+"),s=a("PSD3"),l=a.n(s),b=a("M0ag"),d=a("ey9i"),u=a("XNiG"),m=a("1G5W");function p(o,e){1&o&&(c.bc(0,"small",18),c.Mc(1," campo obligatorio "),c.ac())}function h(o,e){if(1&o&&(c.bc(0,"small",18),c.Mc(1),c.ac()),2&o){const o=c.lc(2);c.Ib(1),c.Oc(" ",null==o.Forma.controls.nombre.errors?null:null==o.Forma.controls.nombre.errors.maxlength?null:o.Forma.controls.nombre.errors.maxlength.requiredLength," caracteres como m\xe1ximo ")}}function g(o,e){1&o&&(c.bc(0,"small",18),c.Mc(1," campo obligatorio "),c.ac())}function f(o,e){if(1&o&&(c.bc(0,"small",18),c.Mc(1),c.ac()),2&o){const o=c.lc(2);c.Ib(1),c.Oc(" ",null==o.Forma.controls.descripcion.errors?null:null==o.Forma.controls.descripcion.errors.maxlength?null:o.Forma.controls.descripcion.errors.maxlength.requiredLength," caracteres como m\xe1ximo ")}}function v(o,e){if(1&o){const o=c.cc();c.bc(0,"form",8),c.jc("ngSubmit",(function(e){return c.Dc(o),c.lc().validar()})),c.bc(1,"div",9),c.bc(2,"label"),c.Mc(3,"Nombre"),c.ac(),c.Wb(4,"input",10),c.Kc(5,p,2,0,"small",11),c.Kc(6,h,2,1,"small",11),c.ac(),c.bc(7,"div",9),c.bc(8,"label"),c.Mc(9,"Descripci\xf3n"),c.ac(),c.Wb(10,"textarea",12),c.Kc(11,g,2,0,"small",11),c.Kc(12,f,2,1,"small",11),c.ac(),c.bc(13,"div",13),c.bc(14,"button",14),c.Wb(15,"i",15),c.Mc(16,"Guardar"),c.ac(),c.bc(17,"button",16),c.jc("click",(function(e){return c.Dc(o),c.lc().cancelar()})),c.Wb(18,"i",17),c.Mc(19,"Cancelar"),c.ac(),c.ac(),c.ac()}if(2&o){const o=c.lc();c.rc("formGroup",o.Forma),c.Ib(5),c.rc("ngIf",o.Forma.get("nombre").touched&&o.Forma.get("nombre").hasError("required")),c.Ib(1),c.rc("ngIf",o.Forma.get("nombre").touched&&o.Forma.get("nombre").hasError("maxlength")),c.Ib(5),c.rc("ngIf",o.Forma.get("descripcion").touched&&o.Forma.get("descripcion").hasError("required")),c.Ib(1),c.rc("ngIf",o.Forma.get("descripcion").touched&&o.Forma.get("descripcion").hasError("maxlength"))}}let x=(()=>{class o{constructor(o,e,a,r,t){this.router=o,this.activatedRoute=e,this.fb=a,this.rolService=r,this.metodosGlobales=t,this.unsubscribe$=new u.a,this.objRol={},this.iniciarFormulario(this.fb)}ngOnInit(){this.titulo="Registro de Rol",this.cargarRol()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}iniciarFormulario(o){this.Forma=o.group({num_sec:[0],nombre:["",i.w.compose([i.w.required,i.w.maxLength(50)])],descripcion:["",i.w.compose([i.w.required,i.w.maxLength(150)])]})}cargarRol(){this.activatedRoute.params.pipe(Object(m.a)(this.unsubscribe$)).subscribe(o=>{o.num_sec&&(this.titulo="Modificaci\xf3n de Rol",this.rolService.traerPorCodigo(o.num_sec).pipe(Object(m.a)(this.unsubscribe$)).subscribe(o=>{this.metodosGlobales.validaError(o,!1)&&(this.objRol=o.response,this.Forma.setValue(this.objRol),this.banderaModifica=!0)},o=>{console.log(o)}))})}validar(){this.Forma.markAllAsTouched(),this.Forma.valid&&l.a.fire(b.b).then(o=>{o.value&&(!0===this.banderaModifica?this.modificar():this.guardar())})}guardar(){this.actualizarForma(this.Forma.value),this.objRol.num_sec=1,this.rolService.guardar(this.objRol).pipe(Object(m.a)(this.unsubscribe$)).subscribe(o=>{this.metodosGlobales.validaError(o)&&this.cancelar()},o=>{console.log(o)})}modificar(){this.actualizarForma(this.Forma.value),this.rolService.modificar(this.objRol.num_sec.toString(),this.objRol).pipe(Object(m.a)(this.unsubscribe$)).subscribe(o=>{this.metodosGlobales.validaError(o)&&this.router.navigate(["administracion/rol","buscar"])},o=>{console.log(o)})}cancelar(){this.banderaModifica?this.router.navigate(["administracion/rol","buscar"]):(this.Forma.reset(),this.Forma.setValue({num_sec:0,nombre:"",descripcion:""}))}actualizarForma(o){Object.assign(this.objRol,o)}}return o.\u0275fac=function(e){return new(e||o)(c.Vb(t.e),c.Vb(t.a),c.Vb(i.e),c.Vb(d.l),c.Vb(d.i))},o.\u0275cmp=c.Pb({type:o,selectors:[["app-rol-nuevo"]],decls:9,vars:2,consts:[[1,"row","justify-content-center"],[1,"col-xl-6","col-md-8"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header"],[1,"mb-0"],[1,"fa","fa-save"],[1,"card-body","pt-0"],["class","text-left mt-4",3,"formGroup","ngSubmit",4,"ngIf"],[1,"text-left","mt-4",3,"formGroup","ngSubmit"],[1,"form-group"],["formControlName","nombre","type","text",1,"form-control","validation-field"],["class","text-danger",4,"ngIf"],["formControlName","descripcion","type","text",1,"form-control","validation-field"],[1,"form-group","text-center","mb-0"],["type","submit",1,"btn","btn-primary"],[1,"fa","fa-save","mr-2"],["type","button",1,"btn","btn-secondary","ml-1",3,"click"],[1,"fa","fa-remove","mr-2"],[1,"text-danger"]],template:function(o,e){1&o&&(c.bc(0,"div",0),c.bc(1,"div",1),c.bc(2,"div",2),c.bc(3,"div",3),c.bc(4,"h4",4),c.Wb(5,"i",5),c.Mc(6),c.ac(),c.ac(),c.bc(7,"div",6),c.Kc(8,v,20,5,"form",7),c.ac(),c.ac(),c.ac(),c.ac()),2&o&&(c.Ib(6),c.Oc(" ",e.titulo,""),c.Ib(2),c.rc("ngIf",e.Forma))},directives:[r.m,i.y,i.o,i.i,i.b,i.n,i.g],styles:[""]}),o})();var M=a("lDzL"),F=a("Mfq2");function w(o,e){1&o&&(c.bc(0,"div",23),c.bc(1,"div",24),c.bc(2,"h5",25),c.Mc(3,"No se encontr\xf3 ning\xfan resultado"),c.ac(),c.ac(),c.ac())}function y(o,e){1&o&&c.Mc(0),2&o&&c.Oc(" ",e.value," ")}function I(o,e){1&o&&c.Mc(0),2&o&&c.Oc(" ",e.value," ")}function R(o,e){1&o&&c.Mc(0),2&o&&c.Oc(" ",e.value," ")}const _=function(o){return["/administracion/rol/modificar",o]};function P(o,e){if(1&o&&(c.bc(0,"div",33),c.bc(1,"button",34),c.Wb(2,"i",35),c.ac(),c.ac()),2&o){const o=e.value;c.Ib(1),c.rc("routerLink",c.uc(2,_,o))("adaptivePosition",!1)}}function j(o,e){if(1&o){const o=c.cc();c.bc(0,"div",33),c.bc(1,"button",36),c.jc("click",(function(a){c.Dc(o);const r=e.value;return c.lc(2).eliminar(r)})),c.Wb(2,"i",37),c.ac(),c.ac()}2&o&&(c.Ib(1),c.rc("adaptivePosition",!1))}function k(o,e){if(1&o){const o=c.cc();c.bc(0,"ngx-datatable",26,27),c.jc("page",(function(e){return c.Dc(o),c.lc().buscarPaginado(e)})),c.bc(2,"ngx-datatable-column",28),c.Kc(3,y,1,1,"ng-template",29),c.ac(),c.bc(4,"ngx-datatable-column",30),c.Kc(5,I,1,1,"ng-template",29),c.ac(),c.bc(6,"ngx-datatable-column",31),c.Kc(7,R,1,1,"ng-template",29),c.ac(),c.bc(8,"ngx-datatable-column",32),c.Kc(9,P,3,4,"ng-template",29),c.ac(),c.bc(10,"ngx-datatable-column",32),c.Kc(11,j,3,1,"ng-template",29),c.ac(),c.ac()}if(2&o){const o=c.lc();c.rc("rows",o.array)("headerHeight",40)("columnMode","force")("footerHeight",50)("rowHeight","auto")("loadingIndicator",o.banderaCargando)("externalPaging",!0)("count",o.paginado.totalElementos)("limit",o.paginado.cantidadMostrar)("offset",o.paginado.numeroPaginaActual)("scrollbarH",!0),c.Ib(8),c.rc("width",55),c.Ib(2),c.rc("width",55)}}let S=(()=>{class o{constructor(o,e){this._rolService=o,this._metodosGlobales=e,this.paginado=new d.j,this.banderaCargando=!1,this.array=[],this.busqueda={valor:"",parametro:"nombre"}}ngOnInit(){this.paginado.numeroPaginaActual=0,this.paginado.cantidadMostrar=5,this.buscarPaginado({offset:0})}buscarPaginado(o){this.banderaCargando=!0,this.paginado.numeroPaginaActual=o.offset,this._rolService.buscarPaginado(this.busqueda.valor,this.busqueda.parametro,this.paginado.numeroPaginaActual,this.paginado.cantidadMostrar).subscribe(o=>{this._metodosGlobales.validaError(o,!1)&&(this.paginado.totalElementos=Number(o.total),this.paginado.cantidadMostrar=this.paginado.cantidadMostrar,this.array=o.response,this.banderaCargando=!1)},o=>{this.banderaCargando=!1,console.log(o)})}numeroRegistrosMostrados(o){this.paginado.cantidadMostrar=o.srcElement.value,this.paginado.numeroPaginaActual=0,this.buscarPaginado({offset:this.paginado.numeroPaginaActual})}eliminar(o){l.a.fire(Object(b.c)("\xbfEst\xe1 seguro de\n    Eliminar el Registro?")).then(e=>{!0===e.value&&this._rolService.eliminar(o).subscribe(o=>{this._metodosGlobales.validaError(o)&&this.buscarPaginado({offset:this.paginado.numeroPaginaActual})},o=>{console.log(o)})})}}return o.\u0275fac=function(e){return new(e||o)(c.Vb(d.l),c.Vb(d.i))},o.\u0275cmp=c.Pb({type:o,selectors:[["app-rol-buscar"]],decls:41,vars:4,consts:[[1,"card","border-0","box-shadow","rounded-0","mb-0"],[1,"card-header"],[1,"mb-0"],[1,"fa","fa-search"],[1,"card-body","pt-0"],[1,"mt-4"],[1,"form-row"],[1,"form-group","col-md-1"],["for","inlineFormCustomSelectPref"],["id","inlineFormCustomSelectPref",1,"custom-select",3,"change"],["selected","","value","5"],["value","10"],["value","30"],["value","50"],[1,"form-group","col-md-3"],["name","parametro","id","inlineFormCustomSelectPref",1,"custom-select",3,"ngModel","ngModelChange"],["value","num_sec"],["value","nombre"],[1,"form-group","col-md-5"],["name","valor","type","text","id","inlineFormInputName2","placeholder","Buscar",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-primary","my-1",3,"click"],["class","card text-white bg-secondary mb-3",4,"ngIf","ngIfElse"],["show",""],[1,"card","text-white","bg-secondary","mb-3"],[1,"card-body","text-center","p-2"],[1,"card-title"],[1,"material",3,"rows","headerHeight","columnMode","footerHeight","rowHeight","loadingIndicator","externalPaging","count","limit","offset","scrollbarH","page"],["table",""],["name","C\xf3digo","prop","num_sec"],["ngx-datatable-cell-template",""],["name","Nombre","prop","nombre"],["name","Descripcion","prop","descripcion"],["name","","prop","num_sec",3,"width"],[1,"text-center"],["placement","left","tooltip","Modificar",1,"btn","btn-sm","btn-primary",3,"routerLink","adaptivePosition"],[1,"fa","fa-pencil"],["placement","left","tooltip","Eliminar",1,"btn","btn-sm","btn-danger",3,"adaptivePosition","click"],[1,"fa","fa-trash"]],template:function(o,e){if(1&o&&(c.bc(0,"div",0),c.bc(1,"div",1),c.bc(2,"h4",2),c.Wb(3,"i",3),c.Mc(4," Roles "),c.ac(),c.ac(),c.bc(5,"div",4),c.bc(6,"form",5),c.bc(7,"div",6),c.bc(8,"div",7),c.bc(9,"strong"),c.bc(10,"label",8),c.Mc(11,"Mostrar:"),c.ac(),c.ac(),c.ac(),c.bc(12,"div",7),c.bc(13,"select",9),c.jc("change",(function(o){return e.numeroRegistrosMostrados(o)})),c.bc(14,"option",10),c.Mc(15,"5"),c.ac(),c.bc(16,"option",11),c.Mc(17,"10"),c.ac(),c.bc(18,"option",12),c.Mc(19,"30"),c.ac(),c.bc(20,"option",13),c.Mc(21,"50"),c.ac(),c.ac(),c.ac(),c.bc(22,"div",7),c.bc(23,"strong"),c.bc(24,"label",8),c.Mc(25,"Filtrar Por:"),c.ac(),c.ac(),c.ac(),c.bc(26,"div",14),c.bc(27,"select",15),c.jc("ngModelChange",(function(o){return e.busqueda.parametro=o})),c.bc(28,"option",16),c.Mc(29,"C\xf3digo"),c.ac(),c.bc(30,"option",17),c.Mc(31,"Nombre"),c.ac(),c.ac(),c.ac(),c.bc(32,"div",18),c.bc(33,"input",19),c.jc("ngModelChange",(function(o){return e.busqueda.valor=o})),c.ac(),c.ac(),c.bc(34,"div",7),c.bc(35,"button",20),c.jc("click",(function(o){return e.buscarPaginado({offset:0})})),c.Wb(36,"i",3),c.Mc(37," Buscar"),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.Kc(38,w,4,0,"div",21),c.Kc(39,k,12,13,"ng-template",null,22,c.Lc)),2&o){const o=c.Ac(40);c.Ib(27),c.rc("ngModel",e.busqueda.parametro),c.Ib(6),c.rc("ngModel",e.busqueda.valor),c.Ib(5),c.rc("ngIf",0==e.array.length&&!e.banderaCargando)("ngIfElse",o)}},directives:[i.y,i.o,i.p,i.r,i.x,i.v,i.n,i.q,i.b,r.m,M.c,M.b,M.a,F.a,t.f],styles:[".progress-linear{position:relative!important}  .progress-linear .container{max-width:100%!important;background-color:#004631!important}  .progress-linear .container .bar{max-width:100%!important;background-color:#fff!important}"]}),o})();var C=a("ZOsW");function G(o,e){1&o&&(c.bc(0,"small",17),c.Mc(1," campo obligatorio "),c.ac())}function E(o,e){1&o&&(c.bc(0,"div",18),c.bc(1,"h1",19),c.Wb(2,"i",20),c.Mc(3," Funciones"),c.ac(),c.ac())}function O(o,e){1&o&&(c.bc(0,"div",8),c.bc(1,"label"),c.Mc(2,"FIltro"),c.ac(),c.ac())}const q=[{path:"",component:n,resolve:{},children:[{path:"nuevo",component:x,data:{breadcrumb:"Rol / Registrar"}},{path:"buscar",component:S,data:{breadcrumb:"Rol / Buscar"}},{path:"modificar/:num_sec",component:x,data:{breadcrumb:"Rol / Modificar"}},{path:"asignar-funcion",component:(()=>{class o{constructor(o,e,a,r){this._rolService=o,this._funcionService=e,this._metodosGlobales=a,this._fb=r,this.nodes=[],this.result=[],this.mostrarFunciones=!1,this.arrayRoles=[],this.titulo="Asignar Rol Funcion",this.Forma=this._fb.group({num_sec:[null,i.w.required]})}ngOnInit(){this.traerRoles(),this.Forma.get("num_sec").valueChanges.subscribe(o=>{o?(console.log({value:o}),this.nsecRol=Number(o),this.traerGrupoFuncion(o)):(this.mostrarFunciones=!1,this.nodes=[])})}traerRoles(){this._rolService.buscarPaginado("","nombre",0,0).subscribe(o=>{this._metodosGlobales.validaError(o,!1)&&(this.arrayRoles=o.response)},o=>{console.log(o)})}traerGrupoFuncion(o){this._funcionService.traerGrupoFuncion(o).subscribe(o=>{this._metodosGlobales.validaError(o,!1)&&(this.mostrarFunciones=!0,this.nodes=o.response,this.seleccionarNodos())},o=>{console.log(o),this.mostrarFunciones=!1})}ngAfterViewInit(){}seleccionarNodos(){}validar(){this.Forma.markAllAsTouched(),this.Forma.valid&&l.a.fire(b.b).then(o=>{o.value&&this.guardar()})}guardar(){this.arrayRolFuncion=this.result.map(o=>({num_sec:0,nsec_rol:this.nsecRol,nsec_funcion:o.id,estado:o.isSelect?"AC":"BA"})),this._funcionService.guardarRolFuncion(this.arrayRolFuncion).subscribe(o=>{this._metodosGlobales.validaError(o)},o=>{console.log(o)})}updateDataTree(){this.seleccionarNodos()}}return o.\u0275fac=function(e){return new(e||o)(c.Vb(d.l),c.Vb(d.e),c.Vb(d.i),c.Vb(i.e))},o.\u0275cmp=c.Pb({type:o,selectors:[["app-asignar-funcion"]],decls:22,vars:7,consts:[[1,"row","justify-content-center"],[1,"col-xl-8","col-md-10"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header"],[1,"mb-0"],[1,"fa","fa-save"],[1,"card-body","pt-0"],[1,"text-left","mt-4",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"form-control-label","mt-1","text-sm-right"],["formControlName","num_sec","name","nsec_rol","bindLabel","nombre","bindValue","num_sec",1,"custom",3,"items","loading"],["class","text-danger",4,"ngIf"],[1,"form-group","text-center","mb-0"],["type","submit",1,"btn","btn-primary"],[1,"fa","fa-save","mr-2"],["class","col-sm-12 d-flex ",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"text-danger"],[1,"col-sm-12","d-flex"],[1,"h2","text-center"],[1,"fa","fa-cogs"]],template:function(o,e){1&o&&(c.bc(0,"div",0),c.bc(1,"div",1),c.bc(2,"div",2),c.bc(3,"div",3),c.bc(4,"h4",4),c.Wb(5,"i",5),c.Mc(6),c.ac(),c.ac(),c.bc(7,"div",6),c.bc(8,"form",7),c.jc("ngSubmit",(function(o){return e.validar()})),c.bc(9,"div",8),c.bc(10,"label",9),c.Mc(11,"Seleccionar Rol:"),c.ac(),c.Wb(12,"ng-select",10),c.Kc(13,G,2,0,"small",11),c.Mc(14,"\xa0 "),c.ac(),c.bc(15,"div",12),c.bc(16,"button",13),c.Wb(17,"i",14),c.Mc(18,"Guardar"),c.ac(),c.ac(),c.Kc(19,E,4,0,"div",15),c.bc(20,"div"),c.Kc(21,O,3,0,"div",16),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()),2&o&&(c.Ib(6),c.Oc(" ",e.titulo,""),c.Ib(2),c.rc("formGroup",e.Forma),c.Ib(4),c.rc("items",e.arrayRoles)("loading",!1),c.Ib(1),c.rc("ngIf",e.Forma.get("num_sec").touched&&e.Forma.get("num_sec").hasError("required")),c.Ib(6),c.rc("ngIf",e.mostrarFunciones),c.Ib(2),c.rc("ngIf",e.mostrarFunciones))},directives:[i.y,i.o,i.i,C.a,i.n,i.g,r.m],styles:['.tree-node-level-1{background:#4e6b5a;color:#fff;font-size:1.5rem}.tree-node-leaf{color:#000;background:#fff;font-size:1rem}.node-content-wrapper-active,.node-content-wrapper-active.node-content-wrapper-focused,.node-content-wrapper-focused,.node-content-wrapper.node-content-wrapper-active:hover,.node-content-wrapper:hover{background:transparent}.tree-node-checkbox{width:20px;height:20px;position:relative;margin:5px;background:#fcfff4;border-radius:50px;box-shadow:inset 0 1px 1px #fff,0 1px 1px rgba(0,0,0,.5)}.tree-node-checkbox label{width:20px;height:20px;cursor:pointer;position:absolute;left:4px;top:4px;border-radius:50px;box-shadow:inset 0 1px 1px rgba(0,0,0,.5),0 1px 0 #fff}.tree-node-checkbox label:after{content:"";width:16px;height:16px;position:absolute;top:2px;left:2px;background:#27ae60;opacity:0;border-radius:50px;box-shadow:inset 0 1px 1px #fff,0 1px 3px rgba(0,0,0,.5)}.tree-node-checkbox label:hover:after{opacity:.3}.tree-node-checkbox input[type=checkbox]{visibility:hidden}.tree-node-checkbox input[type=checkbox]:checked+label:after{opacity:1}'],encapsulation:2}),o})(),data:{breadcrumb:"Rol / Asisgnar Funcion"}}]}];let A=(()=>{class o{}return o.\u0275mod=c.Tb({type:o}),o.\u0275inj=c.Sb({factory:function(e){return new(e||o)},imports:[[t.h.forChild(q)],t.h]}),o})();a.d(e,"RolModule",(function(){return W}));let W=(()=>{class o{}return o.\u0275mod=c.Tb({type:o}),o.\u0275inj=c.Sb({factory:function(e){return new(e||o)},providers:[],imports:[[r.c,A,b.a]]}),o})()}}]);