(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{nZnQ:function(o,c,a){"use strict";a.r(c);var n=a("ofXK"),r=a("M0ag"),t=a("tyNb"),e=a("fXoL");let i=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275cmp=e.Pb({type:o,selectors:[["app-funcion"]],decls:1,vars:0,template:function(o,c){1&o&&e.Wb(0,"router-outlet")},directives:[t.i],styles:[""]}),o})();var s=a("3Pt+"),l=a("PSD3"),u=a.n(l),b=a("ey9i"),m=a("ZOsW");function d(o,c){1&o&&(e.bc(0,"small",20),e.Mc(1," campo obligatorio "),e.ac())}function g(o,c){if(1&o&&(e.bc(0,"small",20),e.Mc(1),e.ac()),2&o){const o=e.lc(2);e.Ib(1),e.Oc(" ",null==o.Forma.controls.nombre.errors?null:null==o.Forma.controls.nombre.errors.maxlength?null:o.Forma.controls.nombre.errors.maxlength.requiredLength," caracteres como m\xe1ximo ")}}function f(o,c){1&o&&(e.bc(0,"small",20),e.Mc(1," campo obligatorio "),e.ac())}function p(o,c){if(1&o&&(e.bc(0,"small",20),e.Mc(1),e.ac()),2&o){const o=e.lc(2);e.Ib(1),e.Oc(" ",null==o.Forma.controls.descripcion.errors?null:null==o.Forma.controls.descripcion.errors.maxlength?null:o.Forma.controls.descripcion.errors.maxlength.requiredLength," caracteres como m\xe1ximo ")}}function h(o,c){1&o&&(e.bc(0,"small",20),e.Mc(1," campo obligatorio "),e.ac())}function v(o,c){if(1&o&&(e.bc(0,"small",20),e.Mc(1),e.ac()),2&o){const o=e.lc(2);e.Ib(1),e.Oc(" ",null==o.Forma.controls.tipofuncion.errors?null:null==o.Forma.controls.tipofuncion.errors.maxlength?null:o.Forma.controls.tipofuncion.errors.maxlength.requiredLength," caracteres como m\xe1ximo ")}}function F(o,c){1&o&&(e.bc(0,"small",20),e.Mc(1," campo obligatorio "),e.ac())}function M(o,c){if(1&o){const o=e.cc();e.bc(0,"form",8),e.jc("ngSubmit",(function(c){return e.Dc(o),e.lc().validar()})),e.bc(1,"div",9),e.bc(2,"label"),e.Mc(3,"Nombre"),e.ac(),e.Wb(4,"input",10),e.Kc(5,d,2,0,"small",11),e.Kc(6,g,2,1,"small",11),e.ac(),e.bc(7,"div",9),e.bc(8,"label"),e.Mc(9,"Descripci\xf3n"),e.ac(),e.Wb(10,"textarea",12),e.Kc(11,f,2,0,"small",11),e.Kc(12,p,2,1,"small",11),e.ac(),e.bc(13,"div",9),e.bc(14,"label"),e.Mc(15,"Tipo Funci\xf3n"),e.ac(),e.Wb(16,"input",13),e.Kc(17,h,2,0,"small",11),e.Kc(18,v,2,1,"small",11),e.ac(),e.bc(19,"div",9),e.bc(20,"label"),e.Mc(21,"Grupo Funci\xf3n"),e.ac(),e.Wb(22,"ng-select",14),e.Kc(23,F,2,0,"small",11),e.ac(),e.bc(24,"div",15),e.bc(25,"button",16),e.Wb(26,"i",17),e.Mc(27,"Guardar"),e.ac(),e.bc(28,"button",18),e.jc("click",(function(c){return e.Dc(o),e.lc().cancelar()})),e.Wb(29,"i",19),e.Mc(30,"Cancelar"),e.ac(),e.ac(),e.ac()}if(2&o){const o=e.lc();e.rc("formGroup",o.Forma),e.Ib(5),e.rc("ngIf",o.Forma.get("nombre").touched&&o.Forma.get("nombre").hasError("required")),e.Ib(1),e.rc("ngIf",o.Forma.get("nombre").touched&&o.Forma.get("nombre").hasError("maxlength")),e.Ib(5),e.rc("ngIf",o.Forma.get("descripcion").touched&&o.Forma.get("descripcion").hasError("required")),e.Ib(1),e.rc("ngIf",o.Forma.get("descripcion").touched&&o.Forma.get("descripcion").hasError("maxlength")),e.Ib(5),e.rc("ngIf",o.Forma.get("tipofuncion").touched&&o.Forma.get("tipofuncion").hasError("required")),e.Ib(1),e.rc("ngIf",o.Forma.get("tipofuncion").touched&&o.Forma.get("tipofuncion").hasError("maxlength")),e.Ib(4),e.rc("items",o.arrayGrupoFunciones)("loading",!1),e.Ib(1),e.rc("ngIf",o.Forma.get("nsec_grupo_funcion").touched&&o.Forma.get("nsec_grupo_funcion").hasError("required"))}}let _=(()=>{class o{constructor(o,c,a,n,r,t){this._router=o,this._activated_route=c,this._fb=a,this._funcionService=n,this._metodosGlobales=r,this._grupoFuncionService=t,this.objFuncion={},this.arrayGrupoFunciones=[],this.iniciarFormulario(this._fb)}ngOnInit(){this.titulo="Registro de Funci\xf3n",this.traerGrupoFuncion(),this.cargarFuncion()}iniciarFormulario(o){this.Forma=o.group({num_sec:[0],nsec_grupo_funcion:["",s.w.compose([s.w.required])],nombre:["",s.w.compose([s.w.required,s.w.maxLength(100)])],descripcion:["",s.w.compose([s.w.required,s.w.maxLength(200)])],tipofuncion:["",s.w.compose([s.w.maxLength(50)])]})}cargarFuncion(){this._activated_route.params.subscribe(o=>{o.num_sec&&(this.titulo="Modificaci\xf3n de Funci\xf3n",this._funcionService.traerPorCodigo(o.num_sec).subscribe(o=>{this._metodosGlobales.validaError(o,!1)&&(this.objFuncion=o.response,this.Forma.setValue(this.objFuncion),this.banderaModifica=!0)},o=>{console.log(o)}))})}validar(){this.Forma.valid?u.a.fire(r.b).then(o=>{o.value&&(!0===this.banderaModifica?this.modificar():this.guardar())}):Object.values(this.Forma.controls).forEach(o=>{o.markAsTouched()})}guardar(){this.actualizarForma(this.Forma.value),this.objFuncion.num_sec=1,console.log("objeto funcion:",this.objFuncion),this._funcionService.guardar(this.objFuncion).subscribe(o=>{this._metodosGlobales.validaError(o)&&this.cancelar()},o=>{console.log(o)})}modificar(){this.actualizarForma(this.Forma.value),this._funcionService.modificar(this.objFuncion.num_sec.toString(),this.objFuncion).subscribe(o=>{this._metodosGlobales.validaError(o)&&this._router.navigate(["administracion/funcion","buscar"])},o=>{console.log(o)})}cancelar(){this.banderaModifica?this._router.navigate(["administracion/funcion","buscar"]):(this.Forma.reset(),this.Forma.setValue({num_sec:0,nsec_grupo_funcion:"",nombre:"",descripcion:"",tipofuncion:""}))}actualizarForma(o){Object.assign(this.objFuncion,o)}traerGrupoFuncion(){this._grupoFuncionService.buscarPaginado("","nombre",0,1e3).subscribe(o=>{this._metodosGlobales.validaError(o,!1)&&(this.arrayGrupoFunciones=o.response,console.log("traer grupo funcion",this.arrayGrupoFunciones))},o=>{console.log(o)})}}return o.\u0275fac=function(c){return new(c||o)(e.Vb(t.e),e.Vb(t.a),e.Vb(s.e),e.Vb(b.e),e.Vb(b.i),e.Vb(b.f))},o.\u0275cmp=e.Pb({type:o,selectors:[["app-funcion-nuevo"]],decls:9,vars:2,consts:[[1,"row","justify-content-center"],[1,"col-xl-6","col-md-8"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header"],[1,"mb-0"],[1,"fa","fa-save"],[1,"card-body","pt-0"],["class","text-left mt-4",3,"formGroup","ngSubmit",4,"ngIf"],[1,"text-left","mt-4",3,"formGroup","ngSubmit"],[1,"form-group"],["formControlName","nombre","type","text",1,"form-control","validation-field"],["class","text-danger",4,"ngIf"],["formControlName","descripcion","type","text",1,"form-control","validation-field"],["formControlName","tipofuncion","type","text",1,"form-control","validation-field"],["formControlName","nsec_grupo_funcion","name","nsec_grupo_funcion","bindLabel","nombre","bindValue","num_sec",3,"items","loading"],[1,"form-group","text-center","mb-0"],["type","submit",1,"btn","btn-primary"],[1,"fa","fa-save","mr-2"],["type","button",1,"btn","btn-secondary","ml-1",3,"click"],[1,"fa","fa-remove","mr-2"],[1,"text-danger"]],template:function(o,c){1&o&&(e.bc(0,"div",0),e.bc(1,"div",1),e.bc(2,"div",2),e.bc(3,"div",3),e.bc(4,"h4",4),e.Wb(5,"i",5),e.Mc(6),e.ac(),e.ac(),e.bc(7,"div",6),e.Kc(8,M,31,10,"form",7),e.ac(),e.ac(),e.ac(),e.ac()),2&o&&(e.Ib(6),e.Oc(" ",c.titulo,""),e.Ib(2),e.rc("ngIf",c.Forma))},directives:[n.m,s.y,s.o,s.i,s.b,s.n,s.g,m.a],styles:[""]}),o})();var x=a("lDzL"),I=a("Mfq2");function y(o,c){1&o&&(e.bc(0,"div",23),e.bc(1,"div",24),e.bc(2,"h5",25),e.Mc(3,"No se encontr\xf3 ning\xfan resultado"),e.ac(),e.ac(),e.ac())}function w(o,c){1&o&&e.Mc(0),2&o&&e.Oc(" ",c.value," ")}function P(o,c){1&o&&e.Mc(0),2&o&&e.Oc(" ",c.value," ")}function j(o,c){1&o&&e.Mc(0),2&o&&e.Oc(" ",c.value," ")}function C(o,c){1&o&&e.Mc(0),2&o&&e.Oc(" ",c.value," ")}function E(o,c){1&o&&e.Mc(0),2&o&&e.Oc(" ",c.value," ")}const G=function(o){return["/administracion/funcion/modificar",o]};function q(o,c){if(1&o&&(e.bc(0,"div",35),e.bc(1,"button",36),e.Wb(2,"i",37),e.ac(),e.ac()),2&o){const o=c.value;e.Ib(1),e.rc("routerLink",e.uc(2,G,o))("adaptivePosition",!1)}}function S(o,c){if(1&o){const o=e.cc();e.bc(0,"div",35),e.bc(1,"button",38),e.jc("click",(function(a){e.Dc(o);const n=c.value;return e.lc(2).eliminar(n)})),e.Wb(2,"i",39),e.ac(),e.ac()}2&o&&(e.Ib(1),e.rc("adaptivePosition",!1))}function K(o,c){if(1&o){const o=e.cc();e.bc(0,"ngx-datatable",26,27),e.jc("page",(function(c){return e.Dc(o),e.lc().buscarPaginado(c)})),e.bc(2,"ngx-datatable-column",28),e.Kc(3,w,1,1,"ng-template",29),e.ac(),e.bc(4,"ngx-datatable-column",30),e.Kc(5,P,1,1,"ng-template",29),e.ac(),e.bc(6,"ngx-datatable-column",31),e.Kc(7,j,1,1,"ng-template",29),e.ac(),e.bc(8,"ngx-datatable-column",32),e.Kc(9,C,1,1,"ng-template",29),e.ac(),e.bc(10,"ngx-datatable-column",33),e.Kc(11,E,1,1,"ng-template",29),e.ac(),e.bc(12,"ngx-datatable-column",34),e.Kc(13,q,3,4,"ng-template",29),e.ac(),e.bc(14,"ngx-datatable-column",34),e.Kc(15,S,3,1,"ng-template",29),e.ac(),e.ac()}if(2&o){const o=e.lc();e.rc("rows",o.array)("headerHeight",40)("columnMode","force")("footerHeight",50)("rowHeight","auto")("loadingIndicator",o.banderaCargando)("externalPaging",!0)("count",o.paginado.totalElementos)("limit",o.paginado.cantidadMostrar)("offset",o.paginado.numeroPaginaActual)("scrollbarH",!0),e.Ib(12),e.rc("width",55),e.Ib(2),e.rc("width",55)}}const O=[{path:"",component:i,resolve:{},children:[{path:"nuevo",component:_,data:{breadcrumb:"Funci\xf3n / Registrar"}},{path:"buscar",component:(()=>{class o{constructor(o,c){this._funcionService=o,this._metodosGlobales=c,this.paginado=new b.j,this.banderaCargando=!1,this.array=[],this.busqueda={valor:"",parametro:"f.nombre"}}ngOnInit(){this.paginado.numeroPaginaActual=0,this.paginado.cantidadMostrar=5,this.buscarPaginado({offset:0})}buscarPaginado(o){this.banderaCargando=!0,this.paginado.numeroPaginaActual=o.offset,this._funcionService.buscarPaginado(this.busqueda.valor,this.busqueda.parametro,this.paginado.numeroPaginaActual,this.paginado.cantidadMostrar).subscribe(o=>{this._metodosGlobales.validaError(o,!1)&&(this.paginado.totalElementos=Number(o.total),this.paginado.cantidadMostrar=this.paginado.cantidadMostrar,this.array=o.response,this.banderaCargando=!1)},o=>{this.banderaCargando=!1,console.log(o)})}numeroRegistrosMostrados(o){this.paginado.cantidadMostrar=o.srcElement.value,this.paginado.numeroPaginaActual=0,this.buscarPaginado({offset:this.paginado.numeroPaginaActual})}eliminar(o){u.a.fire(Object(r.c)("\xbfEst\xe1 seguro de\n    Eliminar el Registro?")).then(c=>{!0===c.value&&this._funcionService.eliminar(o).subscribe(o=>{this._metodosGlobales.validaError(o)&&this.buscarPaginado({offset:this.paginado.numeroPaginaActual})},o=>{console.log(o)})})}}return o.\u0275fac=function(c){return new(c||o)(e.Vb(b.e),e.Vb(b.i))},o.\u0275cmp=e.Pb({type:o,selectors:[["app-funcion-buscar"]],decls:41,vars:4,consts:[[1,"card","border-0","box-shadow","rounded-0","mb-0"],[1,"card-header"],[1,"mb-0"],[1,"fa","fa-search"],[1,"card-body","pt-0"],[1,"mt-4"],[1,"form-row"],[1,"form-group","col-md-1"],["for","inlineFormCustomSelectPref"],["id","inlineFormCustomSelectPref",1,"custom-select",3,"change"],["selected","","value","5"],["value","10"],["value","30"],["value","50"],[1,"form-group","col-md-3"],["name","parametro","id","inlineFormCustomSelectPref",1,"custom-select",3,"ngModel","ngModelChange"],["value","f.num_sec"],["value","f.nombre"],[1,"form-group","col-md-5"],["name","valor","type","text","id","inlineFormInputName2","placeholder","Buscar",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-primary","my-1",3,"click"],["class","card text-white bg-secondary mb-3",4,"ngIf","ngIfElse"],["show",""],[1,"card","text-white","bg-secondary","mb-3"],[1,"card-body","text-center","p-2"],[1,"card-title"],[1,"material",3,"rows","headerHeight","columnMode","footerHeight","rowHeight","loadingIndicator","externalPaging","count","limit","offset","scrollbarH","page"],["table",""],["name","C\xf3digo","prop","num_sec"],["ngx-datatable-cell-template",""],["name","Funci\xf3n","prop","nombre"],["name","Grupo Funci\xf3n","prop","grupo_funcion"],["name","Descripcion","prop","descripcion"],["name","Tipo Funci\xf3n","prop","tipofuncion"],["name","","prop","num_sec",3,"width"],[1,"text-center"],["placement","left","tooltip","Modificar",1,"btn","btn-sm","btn-primary",3,"routerLink","adaptivePosition"],[1,"fa","fa-pencil"],["placement","left","tooltip","Eliminar",1,"btn","btn-sm","btn-danger",3,"adaptivePosition","click"],[1,"fa","fa-trash"]],template:function(o,c){if(1&o&&(e.bc(0,"div",0),e.bc(1,"div",1),e.bc(2,"h4",2),e.Wb(3,"i",3),e.Mc(4," Funciones "),e.ac(),e.ac(),e.bc(5,"div",4),e.bc(6,"form",5),e.bc(7,"div",6),e.bc(8,"div",7),e.bc(9,"strong"),e.bc(10,"label",8),e.Mc(11,"Mostrar:"),e.ac(),e.ac(),e.ac(),e.bc(12,"div",7),e.bc(13,"select",9),e.jc("change",(function(o){return c.numeroRegistrosMostrados(o)})),e.bc(14,"option",10),e.Mc(15,"5"),e.ac(),e.bc(16,"option",11),e.Mc(17,"10"),e.ac(),e.bc(18,"option",12),e.Mc(19,"30"),e.ac(),e.bc(20,"option",13),e.Mc(21,"50"),e.ac(),e.ac(),e.ac(),e.bc(22,"div",7),e.bc(23,"strong"),e.bc(24,"label",8),e.Mc(25,"Filtrar Por:"),e.ac(),e.ac(),e.ac(),e.bc(26,"div",14),e.bc(27,"select",15),e.jc("ngModelChange",(function(o){return c.busqueda.parametro=o})),e.bc(28,"option",16),e.Mc(29,"C\xf3digo"),e.ac(),e.bc(30,"option",17),e.Mc(31,"Nombre"),e.ac(),e.ac(),e.ac(),e.bc(32,"div",18),e.bc(33,"input",19),e.jc("ngModelChange",(function(o){return c.busqueda.valor=o})),e.ac(),e.ac(),e.bc(34,"div",7),e.bc(35,"button",20),e.jc("click",(function(o){return c.buscarPaginado({offset:0})})),e.Wb(36,"i",3),e.Mc(37," Buscar"),e.ac(),e.ac(),e.ac(),e.ac(),e.ac(),e.ac(),e.Kc(38,y,4,0,"div",21),e.Kc(39,K,16,13,"ng-template",null,22,e.Lc)),2&o){const o=e.Ac(40);e.Ib(27),e.rc("ngModel",c.busqueda.parametro),e.Ib(6),e.rc("ngModel",c.busqueda.valor),e.Ib(5),e.rc("ngIf",0==c.array.length&&!c.banderaCargando)("ngIfElse",o)}},directives:[s.y,s.o,s.p,s.r,s.x,s.v,s.n,s.q,s.b,n.m,x.c,x.b,x.a,I.a,t.f],styles:[""]}),o})(),data:{breadcrumb:"Funci\xf3n / Buscar"}},{path:"modificar/:num_sec",component:_,data:{breadcrumb:"Funci\xf3n / Modificar"}}]}];let W=(()=>{class o{}return o.\u0275mod=e.Tb({type:o}),o.\u0275inj=e.Sb({factory:function(c){return new(c||o)},imports:[[t.h.forChild(O)],t.h]}),o})();a.d(c,"FuncionModule",(function(){return L}));let L=(()=>{class o{}return o.\u0275mod=e.Tb({type:o}),o.\u0275inj=e.Sb({factory:function(c){return new(c||o)},imports:[[n.c,W,r.a]]}),o})()}}]);