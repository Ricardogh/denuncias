(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"2s/A":function(t,e,i){"use strict";i.r(e);var a=i("ofXK"),r=i("tyNb"),o=i("fXoL");let n=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Pb({type:t,selectors:[["app-denuncias"]],decls:1,vars:0,template:function(t,e){1&t&&o.Wb(0,"router-outlet")},directives:[r.i],styles:[""]}),t})();var s=i("3Pt+"),c=i("PSD3"),h=i.n(c),p=i("M0ag"),l=i("ey9i"),g=i("dJ3e"),d=i("XNiG"),m=i("1G5W"),u=i("fqV1"),b=i("qC+V"),f=i("jhN1");const v=["ngxLoading"],w=["customLoadingTemplate"],M=function(t,e,i,a,r){return{animationType:t,primaryColour:e,secondaryColour:i,tertiaryColour:a,backdropBorderRadius:"3px",fullScreenBackdrop:r}};let x=(()=>{class t{constructor(t){this.sanitizer=t,this.ngxLoadingAnimationTypes=b.c,this.loading=!1,this.fullScreenBackdrop=!0,this.primaryColour="#004631",this.secondaryColour="#ffffff",this.coloursEnabled=!1,this.config={animationType:b.c.circle,primaryColour:this.primaryColour,secondaryColour:this.secondaryColour,tertiaryColour:this.primaryColour,backdropBorderRadius:"3px"}}ngOnInit(){console.log("loading1 = ",this.loading)}toggleColours(){this.coloursEnabled=!this.coloursEnabled,this.coloursEnabled?(this.primaryColour="#004631",this.secondaryColour="#006ddd"):(this.primaryColour="#ffffff",this.secondaryColour="#ccc")}toggleTemplate(){this.loadingTemplate=this.loadingTemplate?null:this.customLoadingTemplate}showAlert(){alert("ngx-loading rocks!")}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(f.b))},t.\u0275cmp=o.Pb({type:t,selectors:[["app-loading-ngx"]],viewQuery:function(t,e){var i;1&t&&(o.Qc(v,!0),o.Qc(w,!0)),2&t&&(o.zc(i=o.kc())&&(e.ngxLoadingComponent=i.first),o.zc(i=o.kc())&&(e.customLoadingTemplate=i.first))},inputs:{loading:"loading",fullScreenBackdrop:"fullScreenBackdrop"},decls:1,vars:9,consts:[[3,"show","config","template"]],template:function(t,e){1&t&&o.Wb(0,"ngx-loading",0),2&t&&o.rc("show",e.loading)("config",o.yc(3,M,e.ngxLoadingAnimationTypes.circle,e.primaryColour,e.secondaryColour,e.primaryColour,e.fullScreenBackdrop))("template",e.loadingTemplate)},directives:[b.a],styles:[""]}),t})();var C=i("ZOsW"),S=i("psEu");const I=["input"];let y=(()=>{class t{constructor(t){this.host=t,this.placeholder="Subir requisito...",this.file=null}emitFiles(t){const e=t&&t.item(0);this.onChange(e),this.file=e,e?(this.placeholder=e.name,this.setImagen(e)):(this.placeholder="Subir requisito...",this.image="")}fileChange(t){const e=new FileReader;if(t.files.length){const i=t.files[0];e.onload=()=>{this.image=e.result},e.readAsDataURL(i)}}setImagen(t){const e=new FileReader;e.onload=()=>{this.image=e.result},e.readAsDataURL(t)}removeImage(){this.image="",this.inputImagen.nativeElement.value=null,this.file=null,this.onChange(this.file)}writeValue(t){this.image="",this.inputImagen.nativeElement.value=null,this.file=null}registerOnChange(t){this.onChange=t}registerOnTouched(t){}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(o.o))},t.\u0275cmp=o.Pb({type:t,selectors:[["app-requisito-uploader"]],viewQuery:function(t,e){var i;1&t&&o.Ic(I,!0),2&t&&o.zc(i=o.kc())&&(e.inputImagen=i.first)},hostBindings:function(t,e){1&t&&o.jc("change",(function(t){return e.emitFiles(t.target.files)}))},inputs:{placeholder:"placeholder"},features:[o.Hb([{provide:s.l,useExisting:t,multi:!0}])],decls:9,vars:0,consts:[[1,"form-group"],[1,"col-lg-12",2,"text-align","center"],[1,"btn-group",2,"width","100%"],["title","Subir una nueva imagen","for","inputImage",1,"btn","btn-outline","btn-warning","size-20",2,"width","100%"],["type","file","accept","image/*","name","file","id","inputImage",1,"d-none"],["input",""],[1,"fa","fa-plus"]],template:function(t,e){1&t&&(o.bc(0,"div",0),o.bc(1,"div",1),o.bc(2,"div",2),o.bc(3,"label",3),o.Wb(4,"input",4,5),o.Wb(6,"i",6),o.Mc(7," Subir una Fotograf\xeda "),o.ac(),o.ac(),o.Wb(8,"p"),o.ac(),o.ac())},styles:[".file-upload[_ngcontent-%COMP%]   .file-upload-btn[_ngcontent-%COMP%]{position:absolute;width:100%;height:35px;z-index:9;opacity:0}.file-upload[_ngcontent-%COMP%]   .delete-file[_ngcontent-%COMP%]{position:absolute;right:50px;top:8px;font-size:16px;opacity:.8;cursor:pointer;z-index:99;visibility:hidden}.file-upload[_ngcontent-%COMP%]:hover\xa0.delete-file{visibility:visible}"]}),t})();i("mrSG");const z=["video"],A=["canvas"];function P(t,e){if(1&t){const t=o.cc();o.bc(0,"div",6),o.jc("click",(function(e){return o.Dc(t),o.lc().rotateVideoInput(!0)})),o.ac()}}class O{constructor(t,e,i){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=e,this._imageAsDataUrl=t,this._imageData=i}static getDataFromDataUrl(t,e){return t.replace(`data:${e};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=O.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}var D;let k=(()=>{let t=D=class{constructor(){this.width=640,this.height=480,this.videoOptions=D.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=D.DEFAULT_IMAGE_TYPE,this.imageQuality=D.DEFAULT_IMAGE_QUALITY,this.imageCapture=new o.q,this.initError=new o.q,this.imageClick=new o.q,this.cameraSwitched=new o.q,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(t){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=t.subscribe(()=>{this.takeSnapshot()})}set switchCamera(t){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=t.subscribe(t=>{"string"==typeof t?this.switchToVideoInput(t):this.rotateVideoInput(!1!==t)})}static getMediaConstraintsForDevice(t,e){const i=e||this.DEFAULT_VIDEO_OPTIONS;return t&&(i.deviceId={exact:t}),i}static getDeviceIdFromMediaStreamTrack(t){if(t.getSettings&&t.getSettings()&&t.getSettings().deviceId)return t.getSettings().deviceId;if(t.getConstraints&&t.getConstraints()&&t.getConstraints().deviceId){const e=t.getConstraints().deviceId;return D.getValueFromConstrainDOMString(e)}}static getFacingModeFromMediaStreamTrack(t){if(t){if(t.getSettings&&t.getSettings()&&t.getSettings().facingMode)return t.getSettings().facingMode;if(t.getConstraints&&t.getConstraints()&&t.getConstraints().facingMode){const e=t.getConstraints().facingMode;return D.getValueFromConstrainDOMString(e)}}}static isUserFacing(t){const e=D.getFacingModeFromMediaStreamTrack(t);return!!e&&"user"===e.toLowerCase()}static getValueFromConstrainDOMString(t){if(t){if(t instanceof String)return String(t);if(Array.isArray(t)&&Array(t).length>0)return String(t[0]);if("object"==typeof t){if(t.exact)return String(t.exact);if(t.ideal)return String(t.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(t=>{this.initError.next({message:t}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const t=this.nativeVideoElement,e={width:this.width,height:this.height};t.videoWidth&&(e.width=t.videoWidth,e.height=t.videoHeight);const i=this.canvas.nativeElement;i.width=e.width,i.height=e.height;const a=i.getContext("2d");a.drawImage(t,0,0);const r=this.imageType?this.imageType:D.DEFAULT_IMAGE_TYPE,o=i.toDataURL(r,this.imageQuality?this.imageQuality:D.DEFAULT_IMAGE_QUALITY);let n=null;this.captureImageData&&(n=a.getImageData(0,0,i.width,i.height)),this.imageCapture.next(new O(o,r,n))}rotateVideoInput(t){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(t?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(t){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(t,this.videoOptions)}videoResize(){}get videoWidth(){const t=this.getVideoAspectRatio();return Math.min(this.width,this.height*t)}get videoHeight(){const t=this.getVideoAspectRatio();return Math.min(this.height,this.width/t)}get videoStyleClasses(){let t="";return this.isMirrorImage()&&(t+="mirrored "),t.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const t=this.nativeVideoElement;return t.videoWidth&&t.videoWidth>0&&t.videoHeight&&t.videoHeight>0?t.videoWidth/t.videoHeight:this.width/this.height}initWebcam(t,e){const i=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const a=D.getMediaConstraintsForDevice(t,e);navigator.mediaDevices.getUserMedia({video:a}).then(t=>{this.mediaStream=t,i.srcObject=t,i.play(),this.activeVideoSettings=t.getVideoTracks()[0].getSettings();const e=D.getDeviceIdFromMediaStreamTrack(t.getVideoTracks()[0]);this.cameraSwitched.next(e),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=e?this.availableVideoInputs.findIndex(t=>t.deviceId===e):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(t=>{this.initError.next({message:t.message,mediaStreamError:t})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let t="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?t=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(t=this.mirrorImage.x.toLowerCase())),t){case"always":return!0;case"never":return!1}}return D.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&this.mediaStream.getTracks().forEach(t=>t.stop())}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((t,e)=>{(class{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((t,e)=>{navigator.mediaDevices.enumerateDevices().then(e=>{t(e.filter(t=>"videoinput"===t.kind))}).catch(t=>{e(t.message||t)})}):Promise.reject("enumerateDevices() not supported.")}}).getAvailableVideoInputs().then(e=>{this.availableVideoInputs=e,t(e)}).catch(t=>{this.availableVideoInputs=[],e(t)})})}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Pb({type:t,selectors:[["webcam"]],viewQuery:function(t,e){var i;1&t&&(o.Ic(z,!0),o.Ic(A,!0)),2&t&&(o.zc(i=o.kc())&&(e.video=i.first),o.zc(i=o.kc())&&(e.canvas=i.first))},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera",mirrorImage:"mirrorImage"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(t,e){1&t&&(o.bc(0,"div",0),o.jc("click",(function(t){return e.imageClick.next()})),o.bc(1,"video",1,2),o.jc("resize",(function(t){return e.videoResize()})),o.ac(),o.Kc(3,P,1,0,"div",3),o.Wb(4,"canvas",4,5),o.ac()),2&t&&(o.Ib(1),o.Kb(e.videoStyleClasses),o.rc("width",e.videoWidth)("height",e.videoHeight),o.Ib(2),o.rc("ngIf",e.allowCameraSwitch&&e.availableVideoInputs.length>1&&e.videoInitialized),o.Ib(1),o.rc("width",e.width)("height",e.height))},directives:[a.m],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scale(-1,1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.18)}"]}),t.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},t.DEFAULT_IMAGE_TYPE="image/jpeg",t.DEFAULT_IMAGE_QUALITY=.92,t})(),R=(()=>{let t=class{};return t.\u0275mod=o.Tb({type:t}),t.\u0275inj=o.Sb({factory:function(e){return new(e||t)},imports:[[a.c]]}),t})();var E=i("qw1q");const _=["sourceImage"];function F(t,e){if(1&t){const t=o.cc();o.bc(0,"img",3,4),o.jc("load",(function(e){return o.Dc(t),o.lc().imageLoadedInView()})),o.ac()}if(2&t){const t=o.lc();o.Jc("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),o.rc("src",t.safeImgDataUrl,o.Fc)}}function T(t,e){if(1&t){const t=o.cc();o.bc(0,"div",5),o.jc("keydown",(function(e){return o.Dc(t),o.lc().keyboardAccess(e)})),o.bc(1,"div",6),o.jc("mousedown",(function(e){return o.Dc(t),o.lc().startMove(e,"move")}))("touchstart",(function(e){return o.Dc(t),o.lc().startMove(e,"move")})),o.Mc(2,"\xa0"),o.ac(),o.bc(3,"span",7),o.jc("mousedown",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","topleft")}))("touchstart",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","topleft")})),o.Wb(4,"span",8),o.ac(),o.bc(5,"span",9),o.Wb(6,"span",8),o.ac(),o.bc(7,"span",10),o.jc("mousedown",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","topright")}))("touchstart",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","topright")})),o.Wb(8,"span",8),o.ac(),o.bc(9,"span",11),o.Wb(10,"span",8),o.ac(),o.bc(11,"span",12),o.jc("mousedown",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","bottomright")}))("touchstart",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","bottomright")})),o.Wb(12,"span",8),o.ac(),o.bc(13,"span",13),o.Wb(14,"span",8),o.ac(),o.bc(15,"span",14),o.jc("mousedown",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","bottomleft")}))("touchstart",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","bottomleft")})),o.Wb(16,"span",8),o.ac(),o.bc(17,"span",15),o.Wb(18,"span",8),o.ac(),o.bc(19,"span",16),o.jc("mousedown",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","top")}))("touchstart",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","top")})),o.ac(),o.bc(20,"span",17),o.jc("mousedown",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","right")}))("touchstart",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","right")})),o.ac(),o.bc(21,"span",18),o.jc("mousedown",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","bottom")}))("touchstart",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","bottom")})),o.ac(),o.bc(22,"span",19),o.jc("mousedown",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","left")}))("touchstart",(function(e){return o.Dc(t),o.lc().startMove(e,"resize","left")})),o.ac(),o.ac()}if(2&t){const t=o.lc();o.Jc("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),o.Mb("rounded",t.roundCropper)}}let W=(()=>{class t{constructor(t,e){this.sanitizer=t,this.cd=e,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.exifTransform={rotate:0,flip:!1},this.stepSize=3,this.marginLeft="0px",this.imageVisible=!1,this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.disabled=!1,this.imageCropped=new o.q,this.startCropImage=new o.q,this.imageLoaded=new o.q,this.cropperReady=new o.q,this.loadImageFailed=new o.q,this.initCropper()}set imageChangedEvent(t){this.initCropper(),t&&t.target&&t.target.files&&t.target.files.length>0&&this.loadImageFile(t.target.files[0])}set imageBase64(t){this.initCropper(),this.checkExifAndLoadBase64Image(t)}set imageFile(t){this.initCropper(),t&&this.loadImageFile(t)}ngOnChanges(t){this.originalImage&&this.originalImage.complete&&this.exifTransform&&(t.containWithinAspectRatio||t.canvasRotation)&&this.transformOriginalImage(),t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition(),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())}setCssTransform(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.stepSize=this.initialStepSize}initCropper(){this.imageVisible=!1,this.transformedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.transformedSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){const e=new FileReader;e.onload=e=>{this.isValidImageType(t.type)?this.checkExifAndLoadBase64Image(e.target.result):this.loadImageFailed.emit()},e.readAsDataURL(t)}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff)/.test(t)}checkExifAndLoadBase64Image(t){return new Promise((e,i)=>{const a=t=>{this.originalImage=null,this.originalBase64=null,i(t)};this.originalImage=new Image,this.originalImage.onload=()=>{this.originalBase64=t,this.exifTransform=function(t){switch("string"==typeof t&&(t=function(t){const e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");const e=atob(t),i=e.length,a=new Uint8Array(i);for(let r=0;r<i;r++)a[r]=e.charCodeAt(r);return a.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;const i=e.byteLength;let a=2;for(;a<i;){if(e.getUint16(a+2,!1)<=8)return-1;const t=e.getUint16(a,!1);if(a+=2,65505==t){if(1165519206!=e.getUint32(a+=2,!1))return-1;const t=18761==e.getUint16(a+=6,!1);a+=e.getUint32(a+4,t);const i=e.getUint16(a,t);a+=2;for(let r=0;r<i;r++)if(274==e.getUint16(a+12*r,t))return e.getUint16(a+12*r+8,t)}else{if(65280!=(65280&t))break;a+=e.getUint16(a,!1)}}return-1}(t)),t){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(t),this.originalSize.width=this.originalImage.naturalWidth,this.originalSize.height=this.originalImage.naturalHeight,this.transformOriginalImage().then(()=>e()).catch(a)},this.originalImage.onerror=a,this.originalImage.src=t})}getTransformedSize(){const t=this.canvasRotation+this.exifTransform.rotate;if(this.containWithinAspectRatio){if(t%2){const t=this.originalSize.height/this.aspectRatio;return{width:Math.max(this.originalSize.height,this.originalSize.width*this.aspectRatio),height:Math.max(this.originalSize.width,t)}}{const t=this.originalSize.width/this.aspectRatio;return{width:Math.max(this.originalSize.width,this.originalSize.height*this.aspectRatio),height:Math.max(this.originalSize.height,t)}}}return t%2?{height:this.originalSize.width,width:this.originalSize.height}:{width:this.originalSize.width,height:this.originalSize.height}}transformImageBase64(){const t=this.canvasRotation+this.exifTransform.rotate,e=this.getTransformedSize(),i=document.createElement("canvas");i.width=e.width,i.height=e.height;const a=i.getContext("2d");return a.setTransform(this.exifTransform.flip?-1:1,0,0,1,i.width/2,i.height/2),a.rotate(Math.PI*(t/2)),a.drawImage(this.originalImage,-this.originalSize.width/2,-this.originalSize.height/2),Promise.resolve(i.toDataURL())}setTransformedImage(t){return new Promise((e,i)=>{this.transformedBase64=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t),this.transformedImage=new Image,this.transformedImage.onload=()=>{this.transformedSize.width=this.transformedImage.naturalWidth,this.transformedSize.height=this.transformedImage.naturalHeight,e(),this.cd.markForCheck()},this.transformedImage.onerror=()=>{this.transformedImage=null,i()},this.transformedImage.src=this.transformedBase64})}transformOriginalImage(){return this.originalImage&&this.originalImage.complete&&this.exifTransform?this.transformImageBase64().then(t=>this.setTransformedImage(t)):Promise.reject(new Error("No Image Loaded"))}imageLoadedInView(){null!=this.transformedImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>{this.checkImageMaxSizeRecursively()},50))}onResize(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()}resizeCropperPosition(){const t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){const t=this.sourceImage.nativeElement;if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;const e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;const e=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-e)/2,this.cropper.x2=this.cropper.x1+e}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){t.key>="1"&&t.key<="9"&&(this.stepSize=+t.key)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const e=t.shiftKey?"resize":"move",i=t.altKey?this.getInvertedPositionForKey(t.key):this.getPositionForKey(t.key),a=this.getEventForKey(t.key,this.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},e,i),this.moveImg(a),this.moveStop()}getPositionForKey(t){switch(t){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}getInvertedPositionForKey(t){switch(t){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}getEventForKey(t,e){switch(t){case"ArrowUp":return{clientX:0,clientY:-1*e};case"ArrowRight":return{clientX:e,clientY:0};case"ArrowDown":return{clientX:0,clientY:e};case"ArrowLeft":default:return{clientX:-1*e,clientY:0}}}startMove(t,e,i=null){t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:i,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper)}moveImg(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),"move"===this.moveStart.type?(this.move(t),this.checkCropperPosition(!0)):"resize"===this.moveStart.type&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.transformedImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.transformedImage.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.transformedImage.height*this.maxSize.height):20}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}move(t){const e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+i}resize(t){const e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()}checkAspectRatio(){let t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio)}}doAutoCrop(){this.autoCrop&&this.crop()}crop(){if(this.sourceImage&&this.sourceImage.nativeElement&&null!=this.transformedImage){this.startCropImage.emit();const t=this.getImagePosition(),e=t.x2-t.x1,i=t.y2-t.y1,a=document.createElement("canvas");a.width=e,a.height=i;const r=a.getContext("2d");if(r){null!=this.backgroundColor&&(r.fillStyle=this.backgroundColor,r.fillRect(0,0,e,i));const o=(this.transform.scale||1)*(this.transform.flipH?-1:1),n=(this.transform.scale||1)*(this.transform.flipV?-1:1);r.setTransform(o,0,0,n,this.transformedSize.width/2,this.transformedSize.height/2),r.translate(-t.x1/o,-t.y1/n),r.rotate((this.transform.rotate||0)*Math.PI/180),r.drawImage(this.transformedImage,-this.transformedSize.width/2,-this.transformedSize.height/2);const s={width:e,height:i,imagePosition:t,cropperPosition:Object.assign({},this.cropper)};this.containWithinAspectRatio&&(s.offsetImagePosition=this.getOffsetImagePosition());const c=this.getResizeRatio(e,i);return 1!==c&&(s.width=Math.round(e*c),s.height=this.maintainAspectRatio?Math.round(s.width/this.aspectRatio):Math.round(i*c),function(t,e,i){const a=t.width,r=t.height,o=a/(e=Math.round(e)),n=r/(i=Math.round(i)),s=Math.ceil(o/2),c=Math.ceil(n/2),h=t.getContext("2d");if(h){const p=h.getImageData(0,0,a,r),l=h.createImageData(e,i),g=p.data,d=l.data;for(let t=0;t<i;t++)for(let i=0;i<e;i++){const h=4*(i+t*e),p=t*n;let l=0,m=0,u=0,b=0,f=0,v=0,w=0;const M=Math.floor(i*o),x=Math.floor(t*n);let C=Math.ceil((i+1)*o),S=Math.ceil((t+1)*n);C=Math.min(C,a),S=Math.min(S,r);for(let t=x;t<S;t++){const e=Math.abs(p-t)/c,r=i*o,n=e*e;for(let i=M;i<C;i++){const e=Math.abs(r-i)/s,o=Math.sqrt(n+e*e);if(o>=1)continue;l=2*o*o*o-3*o*o+1;const c=4*(i+t*a);w+=l*g[c+3],u+=l,g[c+3]<255&&(l=l*g[c+3]/250),b+=l*g[c],f+=l*g[c+1],v+=l*g[c+2],m+=l}}d[h]=b/m,d[h+1]=f/m,d[h+2]=v/m,d[h+3]=w/u}t.width=e,t.height=i,h.putImageData(l,0,0)}}(a,s.width,s.height)),s.base64=this.cropToBase64(a),this.imageCropped.emit(s),s}}return null}getImagePosition(){const t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth,e={x1:Math.round(this.cropper.x1*t),y1:Math.round(this.cropper.y1*t),x2:Math.round(this.cropper.x2*t),y2:Math.round(this.cropper.y2*t)};return this.containWithinAspectRatio||(e.x1=Math.max(e.x1,0),e.y1=Math.max(e.y1,0),e.x2=Math.min(e.x2,this.transformedSize.width),e.y2=Math.min(e.y2,this.transformedSize.height)),e}getOffsetImagePosition(){const t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth;let e,i;(this.canvasRotation+this.exifTransform.rotate)%2?(e=(this.transformedSize.width-this.originalSize.height)/2,i=(this.transformedSize.height-this.originalSize.width)/2):(e=(this.transformedSize.width-this.originalSize.width)/2,i=(this.transformedSize.height-this.originalSize.height)/2);const a={x1:Math.round(this.cropper.x1*t)-e,y1:Math.round(this.cropper.y1*t)-i,x2:Math.round(this.cropper.x2*t)-e,y2:Math.round(this.cropper.y2*t)-i};return this.containWithinAspectRatio||(a.x1=Math.max(a.x1,0),a.y1=Math.max(a.y1,0),a.x2=Math.min(a.x2,this.transformedSize.width),a.y2=Math.min(a.y2,this.transformedSize.height)),a}cropToBase64(t){return t.toDataURL("image/"+this.format,this.getQuality())}getQuality(){return Math.min(1,Math.max(0,this.imageQuality/100))}getResizeRatio(t,e){if(this.resizeToWidth>0){if(!this.onlyScaleDown||t>this.resizeToWidth)return this.resizeToWidth/t}else if(this.resizeToHeight>0&&(!this.onlyScaleDown||e>this.resizeToHeight))return this.resizeToHeight/e;return 1}getClientX(t){return(t.touches&&t.touches[0]?t.touches[0].clientX:t.clientX)||0}getClientY(t){return(t.touches&&t.touches[0]?t.touches[0].clientY:t.clientY)||0}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(f.b),o.Vb(o.i))},t.\u0275cmp=o.Pb({type:t,selectors:[["image-cropper"]],viewQuery:function(t,e){var i;1&t&&o.Qc(_,!0),2&t&&o.zc(i=o.kc())&&(e.sourceImage=i.first)},hostVars:4,hostBindings:function(t,e){1&t&&o.jc("resize",(function(t){return e.onResize()}),!1,o.Cc)("mousemove",(function(t){return e.moveImg(t)}),!1,o.Bc)("touchmove",(function(t){return e.moveImg(t)}),!1,o.Bc)("mouseup",(function(t){return e.moveStop()}),!1,o.Bc)("touchend",(function(t){return e.moveStop()}),!1,o.Bc),2&t&&(o.Jc("text-align",e.alignImage),o.Mb("disabled",e.disabled))},inputs:{format:"format",maintainAspectRatio:"maintainAspectRatio",transform:"transform",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",containWithinAspectRatio:"containWithinAspectRatio",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",imageChangedEvent:"imageChangedEvent",imageBase64:"imageBase64",imageFile:"imageFile",backgroundColor:"backgroundColor"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[o.Gb()],decls:4,vars:10,consts:[["class","source-image",3,"src","visibility","transform","load",4,"ngIf"],[1,"overlay"],["class","cropper","tabindex","0",3,"rounded","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"source-image",3,"src","load"],["sourceImage",""],["tabindex","0",1,"cropper",3,"keydown"],[1,"move",3,"mousedown","touchstart"],[1,"resize","topleft",3,"mousedown","touchstart"],[1,"square"],[1,"resize","top"],[1,"resize","topright",3,"mousedown","touchstart"],[1,"resize","right"],[1,"resize","bottomright",3,"mousedown","touchstart"],[1,"resize","bottom"],[1,"resize","bottomleft",3,"mousedown","touchstart"],[1,"resize","left"],[1,"resize-bar","top",3,"mousedown","touchstart"],[1,"resize-bar","right",3,"mousedown","touchstart"],[1,"resize-bar","bottom",3,"mousedown","touchstart"],[1,"resize-bar","left",3,"mousedown","touchstart"]],template:function(t,e){1&t&&(o.bc(0,"div"),o.Kc(1,F,2,5,"img",0),o.Wb(2,"div",1),o.Kc(3,T,23,14,"div",2),o.ac()),2&t&&(o.Jc("background",e.imageVisible&&e.backgroundColor,o.Ob),o.Ib(1),o.rc("ngIf",e.safeImgDataUrl),o.Ib(1),o.Jc("width",e.maxSize.width,"px")("height",e.maxSize.height,"px")("margin-left","center"===e.alignImage?e.marginLeft:null),o.Ib(1),o.rc("ngIf",e.imageVisible))},directives:[a.m],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{position:relative;width:100%}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;top:0;left:0;outline:#fff solid 100vw}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;touch-action:none;outline:rgba(255,255,255,.3) solid 100vw}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:focus   .move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3)}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3)}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),t})(),V=(()=>{class t{}return t.\u0275mod=o.Tb({type:t}),t.\u0275inj=o.Sb({factory:function(e){return new(e||t)},imports:[[a.c]]}),t})();function L(t,e){1&t&&o.Wb(0,"app-loading")}function j(t,e){1&t&&(o.bc(0,"small",42),o.Mc(1," campo obligatorio "),o.ac())}function U(t,e){1&t&&(o.bc(0,"small",42),o.Mc(1," campo obligatorio "),o.ac())}function H(t,e){1&t&&(o.bc(0,"small",42),o.Mc(1," campo obligatorio "),o.ac())}function q(t,e){1&t&&(o.bc(0,"small",42),o.Mc(1," campo obligatorio "),o.ac())}function B(t,e){1&t&&(o.bc(0,"small",42),o.Mc(1," campo obligatorio "),o.ac())}function K(t,e){1&t&&(o.bc(0,"small",42),o.Mc(1," campo obligatorio "),o.ac())}function Q(t,e){1&t&&(o.bc(0,"small",42),o.Mc(1," campo obligatorio "),o.ac())}function Y(t,e){if(1&t&&(o.bc(0,"form",28),o.bc(1,"div",29),o.bc(2,"label"),o.Mc(3,"Fecha y hora"),o.ac(),o.bc(4,"div",30),o.bc(5,"div",31),o.bc(6,"span",32),o.Wb(7,"i",33),o.ac(),o.ac(),o.Wb(8,"input",34),o.ac(),o.Kc(9,j,2,0,"small",35),o.ac(),o.bc(10,"div",29),o.bc(11,"label"),o.Mc(12,"Infracci\xf3n"),o.ac(),o.Wb(13,"ng-select",36),o.Kc(14,U,2,0,"small",35),o.ac(),o.bc(15,"div",29),o.bc(16,"label"),o.Mc(17,"Lugar"),o.ac(),o.Wb(18,"input",37),o.Kc(19,H,2,0,"small",35),o.ac(),o.bc(20,"div",29),o.bc(21,"label"),o.Mc(22,"Denunciante"),o.ac(),o.Wb(23,"input",38),o.Kc(24,q,2,0,"small",35),o.ac(),o.bc(25,"div",29),o.bc(26,"label"),o.Mc(27,"v\xedctima"),o.ac(),o.Wb(28,"input",39),o.Kc(29,B,2,0,"small",35),o.ac(),o.bc(30,"div",29),o.bc(31,"label"),o.Mc(32,"Denunciado/Agresor"),o.ac(),o.bc(33,"div",30),o.Wb(34,"input",40),o.ac(),o.Kc(35,K,2,0,"small",35),o.ac(),o.bc(36,"div",29),o.bc(37,"label"),o.Mc(38,"Caso a determinar"),o.ac(),o.Wb(39,"input",41),o.Kc(40,Q,2,0,"small",35),o.ac(),o.ac()),2&t){const t=o.lc(2);o.rc("formGroup",t.Forma),o.Ib(9),o.rc("ngIf",t.Forma.get("fecha").touched&&t.Forma.get("fecha").hasError("required")),o.Ib(4),o.rc("items",t.arrayTipoDelito)("loading",!1),o.Ib(1),o.rc("ngIf",t.Forma.get("nsec_TipoDelito").touched&&t.Forma.get("nsec_TipoDelito").hasError("required")),o.Ib(5),o.rc("ngIf",t.Forma.get("lugar").touched&&t.Forma.get("lugar").hasError("required")),o.Ib(5),o.rc("ngIf",t.Forma.get("denunciante").touched&&t.Forma.get("denunciante").hasError("required")),o.Ib(5),o.rc("ngIf",t.Forma.get("victima").touched&&t.Forma.get("victima").hasError("required")),o.Ib(6),o.rc("ngIf",t.Forma.get("denunciadoAgresor").touched&&t.Forma.get("denunciadoAgresor").hasError("required")),o.Ib(5),o.rc("ngIf",t.Forma.get("casoDeterminar").touched&&t.Forma.get("casoDeterminar").hasError("required"))}}function G(t,e){if(1&t&&(o.bc(0,"ul"),o.bc(1,"li"),o.Mc(2),o.ac(),o.ac()),2&t){const t=e.$implicit;o.Ib(2),o.Nc(t.message)}}function N(t,e){if(1&t&&(o.bc(0,"div",16),o.bc(1,"alert",43),o.bc(2,"h4",44),o.Mc(3,"Advertencia!"),o.ac(),o.bc(4,"p"),o.Mc(5,"La camara web no esta disponible, pero puede cargar la fotograf\xeda manualmente"),o.ac(),o.Kc(6,G,3,1,"ul",45),o.ac(),o.bc(7,"form",46),o.Wb(8,"app-requisito-uploader",47),o.ac(),o.ac()),2&t){const t=o.lc(2);o.Ib(6),o.rc("ngForOf",t.errors),o.Ib(1),o.rc("formGroup",t.FormaArchivo),o.Ib(1),o.rc("placeholder","Subir fotograf\xeda...")}}function J(t,e){if(1&t){const t=o.cc();o.Zb(0),o.bc(1,"webcam",48),o.jc("imageCapture",(function(e){return o.Dc(t),o.lc(2).handleImage(e)}))("cameraSwitched",(function(e){return o.Dc(t),o.lc(2).cameraWasSwitched(e)}))("initError",(function(e){return o.Dc(t),o.lc(2).handleInitError(e)})),o.ac(),o.bc(2,"button",49),o.jc("click",(function(e){return o.Dc(t),o.lc(2).triggerSnapshot()})),o.Wb(3,"i",50),o.Mc(4,"Capturar"),o.ac(),o.Yb()}if(2&t){const t=o.lc(2);o.Ib(1),o.rc("height",400)("width",400)("trigger",t.triggerObservable)("allowCameraSwitch",t.allowCameraSwitch)("switchCamera",t.nextWebcamObservable)("videoOptions",t.videoOptions)("imageQuality",1)}}function X(t,e){if(1&t&&(o.Zb(0),o.bc(1,"div",51),o.Wb(2,"img",52),o.ac(),o.Yb()),2&t){const t=o.lc(2);o.Ib(2),o.rc("src",t.obtenerImagenWebCam(),o.Fc)}}function Z(t,e){if(1&t){const t=o.cc();o.bc(0,"div",4),o.bc(1,"div",5),o.bc(2,"div",6),o.bc(3,"div",7),o.bc(4,"div",8),o.bc(5,"h4",9),o.Wb(6,"i",10),o.Mc(7),o.ac(),o.ac(),o.bc(8,"div",11),o.bc(9,"div",12),o.bc(10,"div",13),o.Kc(11,Y,41,10,"form",14),o.ac(),o.bc(12,"div",15),o.bc(13,"div",12),o.bc(14,"div",16),o.bc(15,"div",7),o.bc(16,"div",8),o.bc(17,"h4",9),o.Wb(18,"i",17),o.Mc(19," Fotograf\xeda"),o.ac(),o.ac(),o.bc(20,"div",18),o.bc(21,"div",12),o.Kc(22,N,9,3,"div",19),o.bc(23,"div",20),o.Kc(24,J,5,7,"ng-container",21),o.ac(),o.bc(25,"div",20),o.Wb(26,"hr"),o.Kc(27,X,3,1,"ng-container",21),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.bc(28,"div",16),o.bc(29,"div",22),o.bc(30,"button",23),o.jc("click",(function(e){return o.Dc(t),o.lc().validar()})),o.Wb(31,"i",24),o.Mc(32,"Guardar "),o.ac(),o.bc(33,"button",25),o.jc("click",(function(e){return o.Dc(t),o.lc().cancelar()})),o.Wb(34,"i",26),o.Mc(35," Cancelar "),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.Wb(36,"app-loading-ngx",27)}if(2&t){const t=o.lc(),e=o.Ac(5),i=o.Ac(7);o.Ib(7),o.Oc(" ",t.titulo,""),o.Ib(4),o.rc("ngIf",t.Forma),o.Ib(11),o.rc("ngIf",!t.showWebcam&&e),o.Ib(2),o.rc("ngIf",t.showWebcam)("ngIfElse",e),o.Ib(3),o.rc("ngIf",t.webcamImage)("ngIfElse",i),o.Ib(9),o.rc("loading",t.loadingPantalla)}}function $(t,e){if(1&t){const t=o.cc();o.bc(0,"app-error-page",53),o.jc("recargarChange",(function(e){return o.Dc(t),o.lc().reload()})),o.ac()}}function tt(t,e){if(1&t){const t=o.cc();o.Wb(0,"hr"),o.bc(1,"image-cropper",54),o.jc("imageCropped",(function(e){return o.Dc(t),o.lc().imageCropped(e)}))("imageLoaded",(function(e){return o.Dc(t),o.lc().imageLoaded()}))("cropperReady",(function(e){return o.Dc(t),o.lc().cropperReady()}))("loadImageFailed",(function(e){return o.Dc(t),o.lc().loadImageFailed()})),o.ac()}if(2&t){const t=o.lc();o.Ib(1),o.rc("imageFile",t.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToWidth",400)}}function et(t,e){if(1&t&&(o.bc(0,"div",51),o.Wb(1,"img",55),o.ac()),2&t){const t=o.lc();o.Ib(1),o.Jc("border",t.croppedImage?"1px solid black":"none"),o.rc("src",t.croppedImage,o.Fc)}}let it=(()=>{class t{constructor(t,e,i,a,r,o,n){this.router=t,this.datePipe=e,this.activatedRoute=i,this.fb=a,this.metodosGlobales=r,this.denucianServie=o,this.tipoDelitoService=n,this.EstadoPagina=l.d,this.banderaEstado=l.d.Cargando,this.objPersona={},this.arrayTipoDelito=[],this.unsubscribe$=new d.a,this.loadingPantalla=!1,this.imageChangedEvent="",this.croppedImage="",this.croppedImageFile="",this.showWebcam=!0,this.allowCameraSwitch=!1,this.multipleWebcamsAvailable=!1,this.videoOptions={},this.errors=[],this.webcamImage=null,this.trigger=new d.a,this.nextWebcam=new d.a,this.iniciarFormulario(this.fb),this.FormaArchivo=a.group({archivo:[null,s.w.required]})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}ngOnInit(){this.titulo="Registro de Denuncias",this.traerTipoDelito(),this.FormaArchivo.get("archivo").valueChanges.subscribe(t=>{t||(this.croppedImage=""),this.imageChangedEvent=t})}reload(){this.banderaEstado=l.d.Cargando,this.traerTipoDelito()}iniciarFormulario(t){this.Forma=t.group({num_sec:[0],fecha:["",s.w.compose([s.w.required])],nsec_TipoDelito:["",s.w.compose([s.w.required])],lugar:["",s.w.compose([s.w.required])],denunciante:["",s.w.compose([s.w.required])],victima:["",s.w.compose([s.w.required])],denunciadoAgresor:["",s.w.compose([s.w.required])],casoDeterminar:["",s.w.compose([s.w.required])],image:[null]})}traerTipoDelito(){this.tipoDelitoService.traerTipoDelito().pipe(Object(m.a)(this.unsubscribe$)).subscribe(t=>{this.arrayTipoDelito=t.response,this.activatedRoute.params.subscribe(t=>{t.num_sec?(this.titulo="Modificaciar denuncia",this.banderaModifica=!0,this.denucianServie.traerPorCodigo(t.num_sec).subscribe(t=>{this.metodosGlobales.validaError(t,!1)?(this.Forma.patchValue(t.response),this.croppedImage=this.Forma.get("image").value,this.banderaEstado=l.d.Ok):this.banderaEstado=l.d.Error})):this.banderaEstado=l.d.Ok})})}validar(){this.Forma.markAllAsTouched(),this.Forma.valid&&h.a.fire(p.b).then(t=>{t.value&&this.guardar()})}guardar(){this.loadingPantalla=!0,this.denucianServie.guardar(this.Forma.value).pipe(Object(m.a)(this.unsubscribe$)).subscribe(t=>{this.metodosGlobales.validaError(t)&&this.activatedRoute.params.subscribe(t=>{t.num_sec?this.router.navigate(["operaciones","denuncias","buscar"]):(this.loadingPantalla=!1,this.iniciarFormulario(this.fb),this.FormaArchivo.get("archivo").setValue(null),this.croppedImage="")})})}cancelar(){this.banderaModifica?this.router.navigate(["operaciones","denuncias","buscar"]):(this.iniciarFormulario(this.fb),this.FormaArchivo.get("archivo").setValue(null),this.croppedImage="")}actualizarForma(t){Object.assign(this.objPersona,t)}triggerSnapshot(){this.trigger.next()}handleInitError(t){console.log(t,"error del webcam"),this.errors.push(t),this.showWebcam=!1}handleImage(t){console.info("received webcam image",t),this.webcamImage=t}cameraWasSwitched(t){console.log("active device: "+t),this.deviceId=t}get triggerObservable(){return this.trigger.asObservable()}get nextWebcamObservable(){return this.nextWebcam.asObservable()}fileChangeEvent(t){this.imageChangedEvent=t}imageCropped(t){this.croppedImage=t.base64,this.Forma.get("image").setValue(this.croppedImage)}imageLoaded(){}cropperReady(){}loadImageFailed(){}obtenerImagenWebCam(){return this.Forma.get("image").setValue(this.webcamImage.imageAsBase64),this.webcamImage.imageAsDataUrl}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(r.e),o.Vb(a.e),o.Vb(r.a),o.Vb(s.e),o.Vb(l.i),o.Vb(g.c),o.Vb(g.l))},t.\u0275cmp=o.Pb({type:t,selectors:[["app-nuevo"]],decls:8,vars:4,consts:[[3,"ngSwitch"],[3,"ngSwitchCase"],["cargaFoto",""],["cropImage",""],[1,"animated","fadeIn"],[1,"row","justify-content-center"],[1,"col-xl-10","col-md-8"],[1,"card","border-0","box-shadow","rounded-0"],[1,"card-header"],[1,"mb-0"],[1,"fa","fa-save"],[1,"card-body","pt-0"],[1,"row"],[1,"col-md-5"],["class","text-left mt-4",3,"formGroup",4,"ngIf"],[1,"col-md-7"],[1,"col-md-12"],[1,"fa","fa-camera"],[1,"card-body"],["class","col-md-12",4,"ngIf"],[1,"col-md-6"],[4,"ngIf","ngIfElse"],[1,"form-group","text-center","mt-5"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-save","mr-2"],["type","button",1,"btn","btn-secondary","ml-1",3,"click"],[1,"fa","fa-remove","mr-2"],[3,"loading"],[1,"text-left","mt-4",3,"formGroup"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar-o"],["formControlName","fecha","type","datetime-local",1,"form-control","validation-field"],["class","text-danger",4,"ngIf"],["formControlName","nsec_TipoDelito","name","nsec_TipoDelito","bindLabel","nombre","bindValue","num_sec",1,"custom","text-uppercase",3,"items","loading"],["formControlName","lugar","type","text",1,"form-control","validation-field","text-uppercase"],["formControlName","denunciante","type","text",1,"form-control","validation-field","text-uppercase"],["formControlName","victima","type","text",1,"form-control","validation-field","text-uppercase"],["formControlName","denunciadoAgresor","type","text",1,"form-control","validation-field","text-uppercase"],["formControlName","casoDeterminar","type","text",1,"form-control","validation-field","text-uppercase"],[1,"text-danger"],["type","warning"],[1,"alert-heading"],[4,"ngFor","ngForOf"],[3,"formGroup"],["formControlName","archivo",3,"placeholder"],[3,"height","width","trigger","allowCameraSwitch","switchCamera","videoOptions","imageQuality","imageCapture","cameraSwitched","initError"],["type","button",1,"btn","btn-primary","btn-block","btn-capturar",3,"click"],[1,"fa","fa-camera","mr-2"],[1,"pictureFrame"],[3,"src"],[3,"recargarChange"],["format","png",3,"imageFile","maintainAspectRatio","aspectRatio","resizeToWidth","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[1,"w-100",3,"src"]],template:function(t,e){1&t&&(o.Zb(0,0),o.Kc(1,L,1,0,"ng-template",1),o.Kc(2,Z,37,8,"ng-template",1),o.Kc(3,$,1,0,"ng-template",1),o.Yb(),o.Kc(4,tt,2,4,"ng-template",null,2,o.Lc),o.Kc(6,et,2,3,"ng-template",null,3,o.Lc)),2&t&&(o.rc("ngSwitch",e.banderaEstado),o.Ib(1),o.rc("ngSwitchCase",e.EstadoPagina.Cargando),o.Ib(1),o.rc("ngSwitchCase",e.EstadoPagina.Ok),o.Ib(1),o.rc("ngSwitchCase",e.EstadoPagina.Error))},directives:[a.o,a.p,u.a,a.m,x,s.y,s.o,s.i,s.b,s.n,s.g,C.a,S.a,a.l,y,k,E.a,W],styles:[""]}),t})();var at=i("lDzL"),rt=i("Mfq2");function ot(t,e){1&t&&o.Wb(0,"app-loading")}function nt(t,e){1&t&&(o.bc(0,"div",29),o.bc(1,"div",30),o.Wb(2,"i",31),o.bc(3,"h5",32),o.Mc(4," No se encontr\xf3 ning\xfan resultado"),o.ac(),o.ac(),o.ac())}const st=function(t){return["/operaciones/denuncias/modificar",t]};function ct(t,e){if(1&t&&(o.bc(0,"div",44),o.bc(1,"button",45),o.Wb(2,"i",46),o.ac(),o.ac()),2&t){const t=e.value;o.Ib(1),o.rc("routerLink",o.uc(2,st,t))("adaptivePosition",!1)}}function ht(t,e){if(1&t){const t=o.cc();o.bc(0,"div",44),o.bc(1,"button",47),o.jc("click",(function(i){o.Dc(t);const a=e.value;return o.lc(3).eliminar(a)})),o.Wb(2,"i",48),o.ac(),o.ac()}2&t&&(o.Ib(1),o.rc("adaptivePosition",!1))}function pt(t,e){1&t&&o.Mc(0),2&t&&o.Oc(" ",e.value," ")}function lt(t,e){1&t&&o.Mc(0),2&t&&o.Oc(" ",e.value," ")}function gt(t,e){1&t&&o.Mc(0),2&t&&o.Oc(" ",e.value," ")}function dt(t,e){1&t&&o.Mc(0),2&t&&o.Oc(" ",e.value," ")}function mt(t,e){1&t&&o.Mc(0),2&t&&o.Oc(" ",e.value," ")}function ut(t,e){1&t&&o.Mc(0),2&t&&o.Oc(" ",e.value," ")}function bt(t,e){1&t&&o.Wb(0,"img",49),2&t&&o.rc("src",e.value,o.Fc)}function ft(t,e){if(1&t){const t=o.cc();o.bc(0,"ngx-datatable",33,34),o.jc("page",(function(e){return o.Dc(t),o.lc(2).buscarPaginado(e)})),o.bc(2,"ngx-datatable-column",35),o.Kc(3,ct,3,4,"ng-template",36),o.ac(),o.bc(4,"ngx-datatable-column",35),o.Kc(5,ht,3,1,"ng-template",36),o.ac(),o.bc(6,"ngx-datatable-column",37),o.Kc(7,pt,1,1,"ng-template",36),o.ac(),o.bc(8,"ngx-datatable-column",38),o.Kc(9,lt,1,1,"ng-template",36),o.ac(),o.bc(10,"ngx-datatable-column",39),o.Kc(11,gt,1,1,"ng-template",36),o.ac(),o.bc(12,"ngx-datatable-column",40),o.Kc(13,dt,1,1,"ng-template",36),o.ac(),o.bc(14,"ngx-datatable-column",41),o.Kc(15,mt,1,1,"ng-template",36),o.ac(),o.bc(16,"ngx-datatable-column",42),o.Kc(17,ut,1,1,"ng-template",36),o.ac(),o.bc(18,"ngx-datatable-column",43),o.Kc(19,bt,1,1,"ng-template",36),o.ac(),o.ac()}if(2&t){const t=o.lc(2);o.rc("rows",t.array)("headerHeight",40)("columnMode","force")("footerHeight",50)("rowHeight","auto")("loadingIndicator",t.banderaCargando)("externalPaging",!0)("count",t.paginado.totalElementos)("limit",t.paginado.cantidadMostrar)("offset",t.paginado.numeroPaginaActual)("scrollbarH",!0),o.Ib(2),o.rc("width",55),o.Ib(2),o.rc("width",55),o.Ib(14),o.rc("width",60)}}function vt(t,e){if(1&t){const t=o.cc();o.bc(0,"div",2),o.bc(1,"div",3),o.bc(2,"div",4),o.bc(3,"h4",5),o.Wb(4,"i",6),o.Mc(5," Listado de denuncias "),o.ac(),o.ac(),o.bc(6,"div",7),o.bc(7,"form",8),o.bc(8,"div",9),o.bc(9,"div",10),o.bc(10,"strong"),o.bc(11,"label",11),o.Mc(12,"Mostrar:"),o.ac(),o.ac(),o.ac(),o.bc(13,"div",10),o.bc(14,"select",12),o.jc("change",(function(e){return o.Dc(t),o.lc().numeroRegistrosMostrados(e)})),o.bc(15,"option",13),o.Mc(16,"5"),o.ac(),o.bc(17,"option",14),o.Mc(18,"10"),o.ac(),o.bc(19,"option",15),o.Mc(20,"30"),o.ac(),o.bc(21,"option",16),o.Mc(22,"50"),o.ac(),o.ac(),o.ac(),o.bc(23,"div",10),o.bc(24,"strong"),o.bc(25,"label",17),o.Mc(26,"Filtrar Por:"),o.ac(),o.ac(),o.ac(),o.bc(27,"div",18),o.bc(28,"select",19),o.jc("ngModelChange",(function(e){return o.Dc(t),o.lc().busqueda.parametro=e})),o.bc(29,"option",20),o.Mc(30,"Delito"),o.ac(),o.bc(31,"option",21),o.Mc(32,"Denunciante"),o.ac(),o.bc(33,"option",22),o.Mc(34,"Victima"),o.ac(),o.bc(35,"option",23),o.Mc(36,"Denunciado Agresor"),o.ac(),o.ac(),o.ac(),o.bc(37,"div",24),o.bc(38,"input",25),o.jc("ngModelChange",(function(e){return o.Dc(t),o.lc().busqueda.valor=e})),o.ac(),o.ac(),o.bc(39,"div",10),o.bc(40,"button",26),o.jc("click",(function(e){return o.Dc(t),o.lc().buscarPaginado({offset:0})})),o.Wb(41,"i",6),o.Mc(42," Buscar "),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.ac(),o.Kc(43,nt,5,0,"div",27),o.Kc(44,ft,20,14,"ng-template",null,28,o.Lc),o.ac()}if(2&t){const t=o.Ac(45),e=o.lc();o.Ib(28),o.rc("ngModel",e.busqueda.parametro),o.Ib(10),o.rc("ngModel",e.busqueda.valor),o.Ib(5),o.rc("ngIf",0==e.array.length&&!e.banderaCargando)("ngIfElse",t)}}function wt(t,e){if(1&t){const t=o.cc();o.bc(0,"app-error-page",50),o.jc("recargarChange",(function(e){return o.Dc(t),o.lc().reload()})),o.ac()}}const Mt=[{path:"",component:n,resolve:{},children:[{path:"nuevo",component:it,data:{breadcrumb:"Operaciones / Denuncias / Nuevo"}},{path:"modificar/:num_sec",component:it,data:{breadcrumb:"Operaciones / Denuncias / Modificar"}},{path:"buscar",component:(()=>{class t{constructor(t,e){this.metodosGlobales=t,this.denunciaService=e,this.paginado=new l.j,this.banderaCargando=!1,this.EstadoPagina=l.d,this.banderaEstado=l.d.Cargando,this.unsubscribe$=new d.a,this.array=[],this.busqueda={valor:"",parametro:"td.nombre"}}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}ngOnInit(){this.cargarData()}cargarData(){this.paginado.numeroPaginaActual=0,this.paginado.cantidadMostrar=5,this.buscarPaginado({offset:0})}reload(){this.banderaEstado=l.d.Cargando,this.cargarData()}buscarPaginado(t){this.banderaCargando=!0,this.paginado.numeroPaginaActual=t.offset,this.denunciaService.buscarPaginado(this.busqueda.valor,this.busqueda.parametro,this.paginado.numeroPaginaActual,this.paginado.cantidadMostrar).pipe(Object(m.a)(this.unsubscribe$)).subscribe(t=>{this.metodosGlobales.validaError(t,!1)?(this.paginado.totalElementos=Number(t.total),this.paginado.cantidadMostrar=this.paginado.cantidadMostrar,this.array=t.response,this.banderaCargando=!1,this.banderaEstado=l.d.Ok):this.banderaEstado=l.d.Error},t=>{this.banderaCargando=!1,this.banderaEstado=l.d.Error})}numeroRegistrosMostrados(t){this.paginado.cantidadMostrar=t.srcElement.value,this.paginado.numeroPaginaActual=0,this.buscarPaginado({offset:this.paginado.numeroPaginaActual})}eliminar(t){h.a.fire(Object(p.c)("\xbfEst\xe1 seguro de Eliminar el Registro?")).then(e=>{!0===e.value&&this.denunciaService.eliminar(t).pipe(Object(m.a)(this.unsubscribe$)).subscribe(t=>{this.metodosGlobales.validaError(t)&&this.buscarPaginado({offset:this.paginado.numeroPaginaActual})})})}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(l.i),o.Vb(g.c))},t.\u0275cmp=o.Pb({type:t,selectors:[["app-buscar"]],decls:4,vars:4,consts:[[3,"ngSwitch"],[3,"ngSwitchCase"],[1,"animated","fadeIn"],[1,"card","border-0","box-shadow","rounded-0","mb-0"],[1,"card-header"],[1,"mb-0"],[1,"fa","fa-search"],[1,"card-body","pt-0"],[1,"mt-4"],[1,"form-row"],[1,"form-group","col-md-1"],["for","inlineFormCustomSelectPrefMostrar"],["id","inlineFormCustomSelectPrefMostrar",1,"custom-select",3,"change"],["selected","","value","5"],["value","10"],["value","30"],["value","50"],["for","inlineFormCustomSelectPref"],[1,"form-group","col-md-3"],["name","parametro","id","inlineFormCustomSelectPref",1,"custom-select",3,"ngModel","ngModelChange"],["selected","","value","td.nombre"],["value","Denunciante"],["value","Victima"],["value","DenunciadoAgresor"],[1,"form-group","col-md-5"],["name","valor","type","text","id","inlineFormInputName2","placeholder","Buscar",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-primary","my-1",3,"click"],["class","card mb-3",4,"ngIf","ngIfElse"],["show",""],[1,"card","mb-3"],[1,"card-body","text-center","p-2"],[1,"fa","fa-inbox","fa-2x"],[1,"card-title"],[1,"material",3,"rows","headerHeight","columnMode","footerHeight","rowHeight","loadingIndicator","externalPaging","count","limit","offset","scrollbarH","page"],["table",""],["name","","prop","num_sec",3,"width"],["ngx-datatable-cell-template",""],["name","Fecha","prop","fecha"],["name","Delito","prop","delito"],["name","Denunciante","prop","denunciante"],["name","Victima","prop","victima"],["name","Denunciado/Agresor","prop","denunciadoAgresor"],["name","CasoDeterminar","prop","casoDeterminar"],["name","Foto","prop","image",3,"width"],[1,"text-center"],["placement","right","tooltip","Modificar",1,"btn","btn-sm","btn-primary",3,"routerLink","adaptivePosition"],[1,"fa","fa-pencil"],["placement","right","tooltip","Eliminar",1,"btn","btn-sm","btn-danger",3,"adaptivePosition","click"],[1,"fa","fa-trash"],["width","70",3,"src"],[3,"recargarChange"]],template:function(t,e){1&t&&(o.Zb(0,0),o.Kc(1,ot,1,0,"ng-template",1),o.Kc(2,vt,46,4,"ng-template",1),o.Kc(3,wt,1,0,"ng-template",1),o.Yb()),2&t&&(o.rc("ngSwitch",e.banderaEstado),o.Ib(1),o.rc("ngSwitchCase",e.EstadoPagina.Cargando),o.Ib(1),o.rc("ngSwitchCase",e.EstadoPagina.Ok),o.Ib(1),o.rc("ngSwitchCase",e.EstadoPagina.Error))},directives:[a.o,a.p,u.a,s.y,s.o,s.p,s.r,s.x,s.v,s.n,s.q,s.b,a.m,at.c,at.b,at.a,rt.a,r.f,E.a],styles:[""]}),t})(),data:{breadcrumb:"Operaciones / Denuncias / Buscar"}}]}];let xt=(()=>{class t{}return t.\u0275mod=o.Tb({type:t}),t.\u0275inj=o.Sb({factory:function(e){return new(e||t)},imports:[[r.h.forChild(Mt)],r.h]}),t})();i.d(e,"DenunciasModule",(function(){return Ct}));let Ct=(()=>{class t{}return t.\u0275mod=o.Tb({type:t}),t.\u0275inj=o.Sb({factory:function(e){return new(e||t)},imports:[[a.c,xt,p.a,R,V]]}),t})()}}]);